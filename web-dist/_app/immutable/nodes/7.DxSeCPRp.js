import"../chunks/DsnmJJEf.js";import{i as B}from"../chunks/CP9tZzGG.js";import{g as M,o as N,A as R,i as T,q as n,u as y,B as b,k as _,l as j,r as o,t as a,w as e,n as x,v as c,m as l}from"../chunks/DzhVMzrA.js";import{i as G}from"../chunks/DSEsMLIz.js";import{T as H}from"../chunks/B2cBvE-Z.js";import{A as w}from"../chunks/D5Hk05_A.js";var I=T('<div style="font-size:10px; color:#888;"> </div>'),K=T('<div style="position:absolute; top:0; left:0; z-index:1000; pointer-events:none;"><div style="position:fixed; right:8px; top:8px; background:rgba(0,0,0,.8); color:#fff; padding:12px; border-radius:8px; font:12px system-ui; min-width:200px; pointer-events:auto;"><h3 style="margin:0 0 8px 0; font-size:14px;">Final Dragon Test</h3> <div style="margin-bottom:8px;"><button style="margin:2px; padding:6px 12px; background:#4CAF50;">Spawn Dragon</button></div> <div style="margin-bottom:8px;"><button style="margin:2px; padding:6px 12px; background:#f44336;">Recycle All</button></div> <div style="border-top:1px solid #444; padding-top:8px; margin-top:8px;"><div> </div> <div style="font-size:10px; color:#888;"> </div> <!> <div style="font-size:10px; color:#888;"></div></div></div></div>');function Y(k,A){M(A,!1);let z=x(0),t=x(null),s=x(!1);async function D(){try{console.log("Starting texture load with Assets system..."),w.add({alias:"dragon-sheet",src:"/sprites/dragon_fly_128_sheet.svg"}),l(t,await w.load("dragon-sheet")),e(t)?(l(s,!0),console.log("Dragon texture loaded successfully via Assets:",{width:e(t).width,height:e(t).height})):console.error("Texture loaded but null:",e(t))}catch(r){console.error("Failed to load dragon texture via Assets:",r);try{console.log("Trying fallback Texture.from..."),l(t,H.from("/sprites/dragon_fly_128_sheet.svg")),await new Promise(i=>setTimeout(i,2e3)),e(t)?(l(s,!0),console.log("Fallback Texture.from loaded:",{width:e(t).width,height:e(t).height})):console.error("Fallback texture still null:",e(t))}catch(i){console.error("Fallback texture loading also failed:",i)}}}function F(){console.log("Spawn dragon called:",{loaded:e(s),dragonTexture:!!e(t)}),!e(s)||e(t),console.log("Cannot spawn dragon - not ready:",{loaded:e(s),textureExists:!!e(t),appExists:!1})}function P(){}N(async()=>{console.log("Page mounted, waiting for existing PixiJS app..."),await new Promise(r=>setTimeout(r,1e3)),console.log("Looking for existing PixiJS app..."),await D()}),R(()=>{console.log("Page destroyed")}),B();var d=K(),f=o(d),p=n(o(f),2),S=o(p);a(p);var g=n(p,2),C=o(g);a(g);var m=n(g,2),u=o(m),E=o(u);a(u);var v=n(u,2),$=o(v,!0);a(v);var h=n(v,2);{var J=r=>{var i=I(),q=o(i);a(i),y(()=>c(q,`Texture size: ${e(t).width??""}x${e(t).height??""}`)),_(r,i)};G(h,r=>{e(t)&&r(J)})}var L=n(h,2);L.textContent="App: Not found",a(m),a(f),a(d),y(()=>{c(E,`Spawned: ${e(z)??""}`),c($,e(s)?"Texture loaded âœ“":"Loading texture...")}),b("click",S,F),b("click",C,P),_(k,d),j()}export{Y as component};

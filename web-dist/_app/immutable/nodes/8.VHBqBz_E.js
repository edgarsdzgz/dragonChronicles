import"../chunks/DsnmJJEf.js";import{i as B}from"../chunks/CP9tZzGG.js";import{g as E,n as p,o as L,A as R,i as U,u as j,B as w,k as G,l as H,r as i,q as o,w as e,v as f,m as l,t as r,C as I}from"../chunks/DzhVMzrA.js";import{b as J}from"../chunks/Dh9k4Bes.js";import{T as K}from"../chunks/B2cBvE-Z.js";import{c as k}from"../chunks/BPzeXWJL.js";import{A as N}from"../chunks/Bdegg2L_.js";var O=U('<div style="position:fixed; inset:0; background: #1a1a2e;"><canvas style="width:100%; height:100%; display:block;"></canvas> <div style="position:absolute; right:8px; top:8px; background:rgba(0,0,0,.8); color:#fff; padding:12px; border-radius:8px; font:12px system-ui; min-width:200px;"><h3 style="margin:0 0 8px 0; font-size:14px;">Simple Dragon Test</h3> <div style="margin-bottom:8px;"><button style="margin:2px; padding:6px 12px; background:#4CAF50;">Spawn Dragon</button></div> <div style="margin-bottom:8px;"><button style="margin:2px; padding:6px 12px; background:#f44336;">Recycle All</button></div> <div style="border-top:1px solid #444; padding-top:8px; margin-top:8px;"><div> </div> <div> </div> <div style="font-size:10px; color:#888;"> </div></div></div></div>');function et(A,T){E(T,!1);let s=p(),a,v=p(0),d=p(null),n=p(k(void 0,50));async function D(){try{l(d,K.from("/sprites/dragon_fly_128_sheet.svg")),l(n,k(e(d),50))}catch(t){console.error("Failed to load dragon texture:",t)}}function z(){if(!e(d))return;const t=e(n).acquire();t.visible=!0,t.position.set(Math.random()*(a.renderer.width-128),Math.random()*(a.renderer.height-128)),t.scale.set(.5),a.stage.addChild(t),I(v)}function C(){for(const t of[...a.stage.children])"texture"in t&&e(n).release(t),a.stage.removeChild(t);l(v,0)}L(async()=>{a=new N({view:e(s),backgroundAlpha:0}),await a.init({resizeTo:e(s).parentElement??window}),await D()}),R(()=>a?.destroy(!0,{children:!0})),B();var c=O(),h=i(c);J(h,t=>l(s,t),()=>e(s));var b=o(h,2),u=o(i(b),2),S=i(u);r(u);var g=o(u,2),M=i(g);r(g);var y=o(g,2),m=i(y),$=i(m);r(m);var x=o(m,2),q=i(x);r(x);var _=o(x,2),F=i(_,!0);r(_),r(y),r(b),r(c),j((t,P)=>{f($,`Spawned: ${e(v)??""}`),f(q,`Pool: ${t??""} total, ${P??""} in use`),f(F,e(d)?"Texture loaded âœ“":"Loading texture...")},[()=>e(n).size(),()=>e(n).inUse()]),w("click",S,z),w("click",M,C),G(A,c),H()}export{et as component};

import"../chunks/DsnmJJEf.js";import{i as V}from"../chunks/CP9tZzGG.js";import{g as q,o as F,an as j,ao as J,i as C,ap as P,u as $,B as b,k as L,l as W,w as e,n as h,m as g,aq as G,r as s,q as n,t as i,v as S}from"../chunks/DzhVMzrA.js";import{i as A}from"../chunks/DSEsMLIz.js";import{s as T,a as Z}from"../chunks/3BtftgJu.js";import{s as z}from"../chunks/Dzv2wtiB.js";import{g as K}from"../chunks/B9jscr3M.js";const Q=()=>{const r=z;return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated}},X={subscribe(r){return Q().page.subscribe(r)}};var Y=C('<div class="error-id svelte-1j96wlh"><small>Error ID: <code class="svelte-1j96wlh"> </code></small></div>'),ee=C(`<div class="error-container svelte-1j96wlh"><div class="error-content svelte-1j96wlh"><div class="error-icon svelte-1j96wlh"><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg></div> <h1 class="error-title svelte-1j96wlh">Something went wrong</h1> <p class="error-message svelte-1j96wlh">We encountered an unexpected error. Don't worry, your progress is safe.</p> <!> <div class="error-actions svelte-1j96wlh"><button class="btn btn-primary svelte-1j96wlh"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23,4 23,10 17,10"></polyline><polyline points="1,20 1,14 7,14"></polyline><path d="M20.49,9A9,9,0,0,0,5.64,5.64L1,10m22,4L18.36,18.36A9,9,0,0,1,3.51,15"></path></svg> Reload Page</button> <button class="btn btn-secondary svelte-1j96wlh"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3,9L12,2L21,9V20A2,2,0,0,1,19,22H5A2,2,0,0,1,3,20Z"></path><polyline points="9,22 9,12 15,12 15,22"></polyline></svg> Go Home</button> <button class="btn btn-outline svelte-1j96wlh"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21,15V19A2,2,0,0,1,19,21H5A2,2,0,0,1,3,19V15"></path><polyline points="7,10 12,15 17,10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> </button></div> <!></div></div>`);function le(r,f){q(f,!1);const a=()=>Z(X,"$page",D),[D,E]=T(),l=h(),u=h();let O=h(""),c=h(!1);F(()=>{e(l)&&g(O,JSON.stringify({message:e(l).message,stack:e(l).stack,id:e(l).id,timestamp:new Date().toISOString(),url:a().url.toString(),userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight}},null,2))});async function B(){if(!e(c)){g(c,!0);try{const d=await(await K()).exportNDJSON(),p=URL.createObjectURL(d),o=document.createElement("a");o.href=p,o.download=`draconia-logs-${new Date().toISOString().split("T")[0]}.ndjson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(p)}catch(t){console.error("Failed to export logs:",t),alert("Failed to export logs. Check console for details.")}finally{g(c,!1)}}}function H(){window.location.reload()}function R(){window.location.href="/"}j(()=>a(),()=>{g(l,a().error)}),j(()=>a(),()=>{g(u,a().error?.id||"unknown")}),J(),V();var w=ee();P(t=>{G.title="Error - Draconia Chronicles"});var y=s(w),x=n(s(y),6);{var I=t=>{var d=Y(),p=s(d),o=n(s(p)),N=s(o,!0);i(o),i(p),i(d),$(()=>S(N,e(u))),L(t,d)};A(x,t=>{e(u)!=="unknown"&&t(I)})}var m=n(x,2),_=s(m),k=n(_,2),v=n(k,2),M=n(s(v));i(v),i(m);var U=n(m,2);A(U,t=>{}),i(y),i(w),$(()=>{v.disabled=e(c),S(M,` ${e(c)?"Exporting...":"Download Logs"}`)}),b("click",_,H),b("click",k,R),b("click",v,B),L(r,w),W(),E()}export{le as component};

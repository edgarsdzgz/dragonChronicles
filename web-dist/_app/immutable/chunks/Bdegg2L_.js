const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./5JZfH1QN.js","./B2cBvE-Z.js","./PPVm8Dsz.js","./Cpj98o6Y.js","./D3sxv01H.js","./B_jbXZpy.js","./DmtBy-2V.js","./apYPPHvX.js","./BGfg7URi.js","./CrFx3A5I.js"])))=>i.map(i=>d[i]);
import{e as w,c as u,E as L,u as j,f as T,d as p,v as g,C as m,G as H,D as _}from"./B2cBvE-Z.js";import{_ as O}from"./PPVm8Dsz.js";const v=[];w.handleByNamedList(u.Environment,v);async function k(s){if(!s)for(let e=0;e<v.length;e++){const r=v[e];if(r.value.test()){await r.value.load();return}}}let c;function D(){if(typeof c=="boolean")return c;try{c=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{c=!1}return c}var C=(s=>(s[s.NONE=0]="NONE",s[s.COLOR=16384]="COLOR",s[s.STENCIL=1024]="STENCIL",s[s.DEPTH=256]="DEPTH",s[s.COLOR_DEPTH=16640]="COLOR_DEPTH",s[s.COLOR_STENCIL=17408]="COLOR_STENCIL",s[s.DEPTH_STENCIL=1280]="DEPTH_STENCIL",s[s.ALL=17664]="ALL",s))(C||{});class W{constructor(e){this.items=[],this._name=e}emit(e,r,t,n,i,a,o,l){const{name:G,items:b}=this;for(let f=0,N=b.length;f<N;f++)b[f][G](e,r,t,n,i,a,o,l);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&this.items.splice(r,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const M=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],E=class x extends L{constructor(e){super(),this.uid=j("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const r=[...M,...this.config.runners??[]];this._addRunners(...r),this._unsafeEvalCheck()}async init(e={}){const r=e.skipExtensionImports===!0?!0:e.manageImports===!1;await k(r),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const t in this._systemsHash)e={...this._systemsHash[t].constructor.defaultOptions,...e};e={...x.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(e,r){let t=e;if(t instanceof T&&(t={container:t},r&&(p(g,"passing a second argument is deprecated, please use render options instead"),t.target=r.renderTexture)),t.target||(t.target=this.view.renderTarget),t.target===this.view.renderTarget&&(this._lastObjectRendered=t.container,t.clearColor??(t.clearColor=this.background.colorRgba),t.clear??(t.clear=this.background.clearBeforeRender)),t.clearColor){const n=Array.isArray(t.clearColor)&&t.clearColor.length===4;t.clearColor=n?t.clearColor:m.shared.setValue(t.clearColor).toArray()}t.transform||(t.container.updateLocalTransform(),t.transform=t.container.localTransform),t.container.visible&&(t.container.enableRenderGroup(),this.runners.prerender.emit(t),this.runners.renderStart.emit(t),this.runners.render.emit(t),this.runners.renderEnd.emit(t),this.runners.postrender.emit(t))}resize(e,r,t){const n=this.view.resolution;this.view.resize(e,r,t),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),t!==void 0&&t!==n&&this.runners.resolutionChange.emit(t)}clear(e={}){const r=this;e.target||(e.target=r.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=C.ALL);const{clear:t,clearColor:n,target:i}=e;m.shared.setValue(n??this.background.colorRgba),r.renderTarget.clear(i,t,m.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(r=>{this.runners[r]=new W(r)})}_addSystems(e){let r;for(r in e){const t=e[r];this._addSystem(t.value,t.name)}}_addSystem(e,r){const t=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=t,this._systemsHash[r]=t;for(const n in this.runners)this.runners[n].add(t);return this}_addPipes(e,r){const t=r.reduce((n,i)=>(n[i.name]=i.value,n),{});e.forEach(n=>{const i=n.value,a=n.name,o=t[a];this.renderPipes[a]=new i(this,o?new o:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(r=>{r.destroy()}),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&H.release(),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!D())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};E.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let S=E,d;function V(s){return d!==void 0||(d=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:s??S.defaultOptions.failIfMajorPerformanceCaveat};try{if(!_.get().getWebGLRenderingContext())return!1;let t=_.get().createCanvas().getContext("webgl",e);const n=!!t?.getContextAttributes()?.stencil;if(t){const i=t.getExtension("WEBGL_lose_context");i&&i.loseContext()}return t=null,n}catch{return!1}})()),d}let h;async function B(s={}){return h!==void 0||(h=await(async()=>{const e=_.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(s)).requestDevice(),!0}catch{return!1}})()),h}const P=["webgl","webgpu","canvas"];async function U(s){let e=[];s.preference?(e.push(s.preference),P.forEach(i=>{i!==s.preference&&e.push(i)})):e=P.slice();let r,t={};for(let i=0;i<e.length;i++){const a=e[i];if(a==="webgpu"&&await B()){const{WebGPURenderer:o}=await O(async()=>{const{WebGPURenderer:l}=await import("./5JZfH1QN.js");return{WebGPURenderer:l}},__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url);r=o,t={...s,...s.webgpu};break}else if(a==="webgl"&&V(s.failIfMajorPerformanceCaveat??S.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await O(async()=>{const{WebGLRenderer:l}=await import("./CrFx3A5I.js");return{WebGLRenderer:l}},__vite__mapDeps([9,1,2,3,5,6,7]),import.meta.url);r=o,t={...s,...s.webgl};break}else if(a==="canvas")throw t={...s},new Error("CanvasRenderer is not yet implemented")}if(delete t.webgpu,delete t.webgl,!r)throw new Error("No available renderer for the current environment");const n=new r;return await n.init(t),n}const R="8.13.1";class I{static init(){globalThis.__PIXI_APP_INIT__?.(this,R)}static destroy(){}}I.extension=u.Application;class z{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,R)}destroy(){this._renderer=null}}z.extension={type:[u.WebGLSystem,u.WebGPUSystem],name:"initHook",priority:-10};const A=class y{constructor(...e){this.stage=new T,e[0]!==void 0&&p(g,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await U(e),y._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return p(g,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,r=!1){const t=y._plugins.slice(0);t.reverse(),t.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};A._plugins=[];let q=A;w.handleByList(u.Application,q._plugins);w.add(I);export{q as A,C,z as R,W as S,R as V,S as a,D as u};

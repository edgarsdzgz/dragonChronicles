import{a as ne,n as te,r as le,c as ae,b as ie}from"../chunks/scheduler.2520d29c.js";import{S as ce,i as de,s as x,e as v,C as N,t as z,D as ue,f as c,b as k,c as g,a as y,g as O,E as R,d as K,h as o,k as Q,l as t,n as Z,p as se}from"../chunks/index.0ed762bc.js";import{s as he}from"../chunks/singletons.d8260ed3.js";import{l as fe}from"../chunks/logger.23a8648b.js";const pe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ve=()=>{const r=he;return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated}},ge={subscribe(r){return ve().page.subscribe(r)}};const{document:oe}=pe;function re(r){let a,s,e,l,u;return{c(){a=v("div"),s=v("small"),e=z("Error ID: "),l=v("code"),u=z(r[2]),this.h()},l(d){a=g(d,"DIV",{class:!0});var n=y(a);s=g(n,"SMALL",{});var E=y(s);e=K(E,"Error ID: "),l=g(E,"CODE",{class:!0});var p=y(l);u=K(p,r[2]),p.forEach(c),E.forEach(c),n.forEach(c),this.h()},h(){o(l,"class","svelte-afj2yc"),o(a,"class","error-id svelte-afj2yc")},m(d,n){Q(d,a,n),t(a,s),t(s,e),t(s,l),t(l,u)},p(d,n){n&4&&se(u,d[2])},d(d){d&&c(a)}}}function me(r){let a,s,e,l,u='<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',d,n,E="Something went wrong",p,_,C="We encountered an unexpected error. Don't worry, your progress is safe.",P,A,w,L,X=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23,4 23,10 17,10"></polyline><polyline points="1,20 1,14 7,14"></polyline><path d="M20.49,9A9,9,0,0,0,5.64,5.64L1,10m22,4L18.36,18.36A9,9,0,0,1,3.51,15"></path></svg>
        Reload Page`,F,D,Y=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3,9L12,2L21,9V20A2,2,0,0,1,19,22H5A2,2,0,0,1,3,20Z"></path><polyline points="9,22 9,12 15,12 15,22"></polyline></svg>
        Go Home`,J,m,h,S,M,T,W,I=r[1]?"Exporting...":"Download Logs",B,q,G,$,i=r[2]!=="unknown"&&re(r);return{c(){a=x(),s=v("div"),e=v("div"),l=v("div"),l.innerHTML=u,d=x(),n=v("h1"),n.textContent=E,p=x(),_=v("p"),_.textContent=C,P=x(),i&&i.c(),A=x(),w=v("div"),L=v("button"),L.innerHTML=X,F=x(),D=v("button"),D.innerHTML=Y,J=x(),m=v("button"),h=N("svg"),S=N("path"),M=N("polyline"),T=N("line"),W=x(),B=z(I),q=x(),this.h()},l(f){ue("svelte-16ie6ml",oe.head).forEach(c),a=k(f),s=g(f,"DIV",{class:!0});var ee=y(s);e=g(ee,"DIV",{class:!0});var b=y(e);l=g(b,"DIV",{class:!0,"data-svelte-h":!0}),O(l)!=="svelte-6dbxwt"&&(l.innerHTML=u),d=k(b),n=g(b,"H1",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-vc6ed9"&&(n.textContent=E),p=k(b),_=g(b,"P",{class:!0,"data-svelte-h":!0}),O(_)!=="svelte-1ep0nnb"&&(_.textContent=C),P=k(b),i&&i.l(b),A=k(b),w=g(b,"DIV",{class:!0});var H=y(w);L=g(H,"BUTTON",{class:!0,"data-svelte-h":!0}),O(L)!=="svelte-bpdmto"&&(L.innerHTML=X),F=k(H),D=g(H,"BUTTON",{class:!0,"data-svelte-h":!0}),O(D)!=="svelte-1kldtke"&&(D.innerHTML=Y),J=k(H),m=g(H,"BUTTON",{class:!0});var V=y(m);h=R(V,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var U=y(h);S=R(U,"path",{d:!0}),y(S).forEach(c),M=R(U,"polyline",{points:!0}),y(M).forEach(c),T=R(U,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),y(T).forEach(c),U.forEach(c),W=k(V),B=K(V,I),V.forEach(c),H.forEach(c),q=k(b),b.forEach(c),ee.forEach(c),this.h()},h(){oe.title="Error - Draconia Chronicles",o(l,"class","error-icon svelte-afj2yc"),o(n,"class","error-title svelte-afj2yc"),o(_,"class","error-message svelte-afj2yc"),o(L,"class","btn btn-primary svelte-afj2yc"),o(D,"class","btn btn-secondary svelte-afj2yc"),o(S,"d","M21,15V19A2,2,0,0,1,19,21H5A2,2,0,0,1,3,19V15"),o(M,"points","7,10 12,15 17,10"),o(T,"x1","12"),o(T,"y1","15"),o(T,"x2","12"),o(T,"y2","3"),o(h,"width","16"),o(h,"height","16"),o(h,"viewBox","0 0 24 24"),o(h,"fill","none"),o(h,"stroke","currentColor"),o(h,"stroke-width","2"),o(m,"class","btn btn-outline svelte-afj2yc"),m.disabled=r[1],o(w,"class","error-actions svelte-afj2yc"),o(e,"class","error-content svelte-afj2yc"),o(s,"class","error-container svelte-afj2yc")},m(f,j){Q(f,a,j),Q(f,s,j),t(s,e),t(e,l),t(e,d),t(e,n),t(e,p),t(e,_),t(e,P),i&&i.m(e,null),t(e,A),t(e,w),t(w,L),t(w,F),t(w,D),t(w,J),t(w,m),t(m,h),t(h,S),t(h,M),t(h,T),t(m,W),t(m,B),t(e,q),G||($=[Z(L,"click",be),Z(D,"click",ye),Z(m,"click",r[3])],G=!0)},p(f,[j]){f[2]!=="unknown"?i?i.p(f,j):(i=re(f),i.c(),i.m(e,A)):i&&(i.d(1),i=null),j&2&&I!==(I=f[1]?"Exporting...":"Download Logs")&&se(B,I),j&2&&(m.disabled=f[1])},i:te,o:te,d(f){f&&(c(a),c(s)),i&&i.d(),G=!1,le($)}}}function be(){window.location.reload()}function ye(){window.location.href="/"}function _e(r,a,s){let e,l,u;ae(r,ge,p=>s(4,u=p));let d="",n=!1;ie(()=>{e&&s(0,d=JSON.stringify({message:e.message,stack:e.stack,id:e.id,timestamp:new Date().toISOString(),url:u.url.toString(),userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight}},null,2))});async function E(){if(!n){s(1,n=!0);try{const p=await fe.exportNDJSON(),_=URL.createObjectURL(p),C=document.createElement("a");C.href=_,C.download=`draconia-logs-${new Date().toISOString().split("T")[0]}.ndjson`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(_)}catch(p){console.error("Failed to export logs:",p),alert("Failed to export logs. Check console for details.")}finally{s(1,n=!1)}}}return r.$$.update=()=>{r.$$.dirty&16&&(e=u.error),r.$$.dirty&16&&s(2,l=u.error?.id||"unknown")},[d,n,l,E,u]}let Ce=class extends ce{constructor(a){super(),de(this,a,_e,me,ne,{})}};export{Ce as component};

import{a as it,n as lt,r as ut,o as pt}from"../chunks/scheduler.2520d29c.js";import{S as dt,i as ft,e as f,s as I,t as b,c,a as L,g as st,b as R,d as h,f as g,h as S,j as z,k as ct,l as t,m as H,n as j,o as x,p as tt}from"../chunks/index.0ed762bc.js";import{l as rt}from"../chunks/logger.23a8648b.js";function mt(a){let n,o,T="Logging Perf Lab",D,r,u,E,i,C,m,O,p,P,s,d,v,F,y,G,w,K,N,et="Export NDJSON",M,_,Q,V,W,q,X,B=a[2]?"yes":"no",A,Y,nt;return{c(){n=f("div"),o=f("h3"),o.textContent=T,D=I(),r=f("div"),u=f("label"),E=b("Rate (logs/sec) "),i=f("input"),C=I(),m=f("label"),O=b("Duration (s) "),p=f("input"),P=I(),s=f("div"),d=f("button"),v=b("Start"),F=I(),y=f("button"),G=b("Stop"),K=I(),N=f("button"),N.textContent=et,M=I(),_=f("div"),Q=b("Produced: "),V=b(a[3]),W=b(" Dropped: "),q=b(a[4]),X=b(" Running: "),A=b(B),this.h()},l(l){n=c(l,"DIV",{style:!0});var e=L(n);o=c(e,"H3",{"data-svelte-h":!0}),st(o)!=="svelte-1uzt7vn"&&(o.textContent=T),D=R(e),r=c(e,"DIV",{style:!0});var J=L(r);u=c(J,"LABEL",{});var Z=L(u);E=h(Z,"Rate (logs/sec) "),i=c(Z,"INPUT",{type:!0,min:!0,max:!0}),Z.forEach(g),C=R(J),m=c(J,"LABEL",{});var $=L(m);O=h($,"Duration (s) "),p=c($,"INPUT",{type:!0,min:!0,max:!0}),$.forEach(g),J.forEach(g),P=R(e),s=c(e,"DIV",{style:!0});var k=L(s);d=c(k,"BUTTON",{});var at=L(d);v=h(at,"Start"),at.forEach(g),F=R(k),y=c(k,"BUTTON",{});var ot=L(y);G=h(ot,"Stop"),ot.forEach(g),K=R(k),N=c(k,"BUTTON",{"data-svelte-h":!0}),st(N)!=="svelte-ghayiv"&&(N.textContent=et),k.forEach(g),M=R(e),_=c(e,"DIV",{});var U=L(_);Q=h(U,"Produced: "),V=h(U,a[3]),W=h(U," Dropped: "),q=h(U,a[4]),X=h(U," Running: "),A=h(U,B),U.forEach(g),e.forEach(g),this.h()},h(){S(i,"type","number"),S(i,"min","10"),S(i,"max","10000"),S(p,"type","number"),S(p,"min","1"),S(p,"max","30"),z(r,"margin-bottom","16px"),d.disabled=a[2],y.disabled=w=!a[2],z(s,"margin-bottom","16px"),z(n,"padding","12px"),z(n,"font","14px system-ui")},m(l,e){ct(l,n,e),t(n,o),t(n,D),t(n,r),t(r,u),t(u,E),t(u,i),H(i,a[0]),t(r,C),t(r,m),t(m,O),t(m,p),H(p,a[1]),t(n,P),t(n,s),t(s,d),t(d,v),t(s,F),t(s,y),t(y,G),t(s,K),t(s,N),t(n,M),t(n,_),t(_,Q),t(_,V),t(_,W),t(_,q),t(_,X),t(_,A),Y||(nt=[j(i,"input",a[8]),j(p,"input",a[9]),j(d,"click",a[5]),j(y,"click",a[6]),j(N,"click",a[7])],Y=!0)},p(l,[e]){e&1&&x(i.value)!==l[0]&&H(i,l[0]),e&2&&x(p.value)!==l[1]&&H(p,l[1]),e&4&&(d.disabled=l[2]),e&4&&w!==(w=!l[2])&&(y.disabled=w),e&8&&tt(V,l[3]),e&16&&tt(q,l[4]),e&4&&B!==(B=l[2]?"yes":"no")&&tt(A,B)},i:lt,o:lt,d(l){l&&g(n),Y=!1,ut(nt)}}}function vt(a,n,o){let T=100,D=10,r=!1,u=0,E=0,i;function C(){o(2,r=!0),o(3,u=0),o(4,E=0),performance.now();const s=1e3/T;i=setInterval(()=>{for(let v=0;v<1;v++){o(3,u++,u);try{rt.log({t:Date.now(),lvl:"info",src:"ui",msg:"perf",data:{seq:u}})}catch{o(4,E++,E)}}},s),setTimeout(m,D*1e3)}function m(){r&&(clearInterval(i),o(2,r=!1))}pt(m);async function O(){const s=await rt.exportNDJSON(),d=URL.createObjectURL(s),v=document.createElement("a");v.href=d,v.download="logs.ndjson",v.click(),URL.revokeObjectURL(d)}function p(){T=x(this.value),o(0,T)}function P(){D=x(this.value),o(1,D)}return[T,D,r,u,E,C,m,O,p,P]}class gt extends dt{constructor(n){super(),ft(this,n,vt,mt,it,{})}}export{gt as component};

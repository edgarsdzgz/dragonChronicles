import{a as K,n as J,r as L,b as Q,o as W,e as X}from"../chunks/scheduler.2520d29c.js";import{S as Y,i as Z,e as m,s as T,t as y,c as g,a as A,f as S,b as E,g as O,d as w,j as i,k as $,l as a,n as G,p as tt}from"../chunks/index.0ed762bc.js";import{S as et,A as nt}from"../chunks/index.422b0410.js";import{G as at}from"../chunks/Graphics.e3bc03dd.js";function rt(o,r=()=>{},e=0){const s=[];let t=0;for(let n=0;n<e;n++){const p=o();t++,s.push(p)}return{acquire(){const n=s.pop();return n||(t++,o())},release(n){r(n),s.push(n)},size(){return t},inUse(){return t-s.length}}}function ot(o,r=0){return rt(()=>new et(o),e=>{e.visible=!1,e.alpha=1,e.rotation=0,e.scale.set(1),e.position.set(0,0),e.parent?.removeChild(e)},r)}function it(o){let r,e,s,t,n,p="Spawn 100",b,c,q="Spawn 1000",z,h,l="Recycle All",C,f,v,D,M,u,P,R=o[2].size()+"",U,V,F=o[2].inUse()+"",j,I,N,H;return{c(){r=m("div"),e=m("canvas"),s=T(),t=m("div"),n=m("button"),n.textContent=p,b=T(),c=m("button"),c.textContent=q,z=T(),h=m("button"),h.textContent=l,C=T(),f=m("div"),v=y("Spawned: "),D=y(o[1]),M=T(),u=m("div"),P=y("Pool: "),U=y(R),V=y(" total, "),j=y(F),I=y(" in use"),this.h()},l(x){r=g(x,"DIV",{style:!0});var _=A(r);e=g(_,"CANVAS",{style:!0}),A(e).forEach(S),s=E(_),t=g(_,"DIV",{style:!0});var d=A(t);n=g(d,"BUTTON",{style:!0,"data-svelte-h":!0}),O(n)!=="svelte-1qhjeqz"&&(n.textContent=p),b=E(d),c=g(d,"BUTTON",{style:!0,"data-svelte-h":!0}),O(c)!=="svelte-5ycajb"&&(c.textContent=q),z=E(d),h=g(d,"BUTTON",{"data-svelte-h":!0}),O(h)!=="svelte-1vyv9z2"&&(h.textContent=l),C=E(d),f=g(d,"DIV",{});var B=A(f);v=w(B,"Spawned: "),D=w(B,o[1]),B.forEach(S),M=E(d),u=g(d,"DIV",{});var k=A(u);P=w(k,"Pool: "),U=w(k,R),V=w(k," total, "),j=w(k,F),I=w(k," in use"),k.forEach(S),d.forEach(S),_.forEach(S),this.h()},h(){i(e,"width","100%"),i(e,"height","100%"),i(e,"display","block"),i(n,"margin-right","6px"),i(c,"margin-right","6px"),i(t,"position","absolute"),i(t,"right","8px"),i(t,"top","8px"),i(t,"background","rgba(0,0,0,.6)"),i(t,"color","#fff"),i(t,"padding","8px"),i(t,"border-radius","6px"),i(t,"font","12px system-ui"),i(r,"position","fixed"),i(r,"inset","0")},m(x,_){$(x,r,_),a(r,e),o[5](e),a(r,s),a(r,t),a(t,n),a(t,b),a(t,c),a(t,z),a(t,h),a(t,C),a(t,f),a(f,v),a(f,D),a(t,M),a(t,u),a(u,P),a(u,U),a(u,V),a(u,j),a(u,I),N||(H=[G(n,"click",o[6]),G(c,"click",o[7]),G(h,"click",o[4])],N=!0)},p(x,[_]){_&2&&tt(D,x[1])},i:J,o:J,d(x){x&&S(r),o[5](null),N=!1,L(H)}}}function st(o,r,e){let s,t,n=0;const p=ot(void 0,200);function b(l){for(let C=0;C<l;C++){const f=new at().circle(Math.random()*6+2).fill(16777215*Math.random()),v=p.acquire();v.visible=!0,v.position.set(Math.random()*t.renderer.width,Math.random()*t.renderer.height),v.texture=t.renderer.generateTexture(f),t.stage.addChild(v),e(1,n++,n)}}function c(){for(const l of[...t.stage.children])"texture"in l&&p.release(l),t.stage.removeChild(l);e(1,n=0)}Q(async()=>{t=new nt({view:s,backgroundAlpha:0}),await t.init({resizeTo:s.parentElement??window})}),W(()=>t?.destroy(!0,{children:!0}));function q(l){X[l?"unshift":"push"](()=>{s=l,e(0,s)})}return[s,n,p,b,c,q,()=>b(100),()=>b(1e3)]}class pt extends Y{constructor(r){super(),Z(this,r,st,it,K,{})}}export{pt as component};

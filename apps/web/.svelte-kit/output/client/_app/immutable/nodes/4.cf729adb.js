import{s as re,n as ae,r as se,o as ie,b as le,d as de}from"../chunks/scheduler.86f77edc.js";import{S as pe,i as ue,b as d,s as A,t as w,f as p,g as x,d as h,c as I,m as X,h as C,j as e,a as ce,k as a,n as oe,l as L}from"../chunks/index.e78d2784.js";import{T as fe}from"../chunks/index.29d1603d.js";import{c as ne}from"../chunks/displayPool.2e449a50.js";import{A as ve}from"../chunks/Application.778f7409.js";function he(u){let n,r,g,t,s,T="Dragon Sprite Test",_,f,i,M="Spawn Dragon",S,b,o,Y="Recycle All",O,l,k,j,N,H,m,R,z=u[2].size()+"",q,G,P=u[2].inUse()+"",B,J,K,D,U=u[3]?"Texture loaded ✓":"Loading texture...",F,Q,Z;return{c(){n=d("div"),r=d("canvas"),g=A(),t=d("div"),s=d("h3"),s.textContent=T,_=A(),f=d("div"),i=d("button"),i.textContent=M,S=A(),b=d("div"),o=d("button"),o.textContent=Y,O=A(),l=d("div"),k=d("div"),j=w("Spawned: "),N=w(u[1]),H=A(),m=d("div"),R=w("Pool: "),q=w(z),G=w(" total, "),B=w(P),J=w(" in use"),K=A(),D=d("div"),F=w(U),this.h()},l(v){n=p(v,"DIV",{style:!0});var c=x(n);r=p(c,"CANVAS",{style:!0}),x(r).forEach(h),g=I(c),t=p(c,"DIV",{style:!0});var y=x(t);s=p(y,"H3",{style:!0,"data-svelte-h":!0}),X(s)!=="svelte-16g88fc"&&(s.textContent=T),_=I(y),f=p(y,"DIV",{style:!0});var $=x(f);i=p($,"BUTTON",{style:!0,"data-svelte-h":!0}),X(i)!=="svelte-a1h3bn"&&(i.textContent=M),$.forEach(h),S=I(y),b=p(y,"DIV",{style:!0});var ee=x(b);o=p(ee,"BUTTON",{style:!0,"data-svelte-h":!0}),X(o)!=="svelte-dfc7i4"&&(o.textContent=Y),ee.forEach(h),O=I(y),l=p(y,"DIV",{style:!0});var E=x(l);k=p(E,"DIV",{});var W=x(k);j=C(W,"Spawned: "),N=C(W,u[1]),W.forEach(h),H=I(E),m=p(E,"DIV",{});var V=x(m);R=C(V,"Pool: "),q=C(V,z),G=C(V," total, "),B=C(V,P),J=C(V," in use"),V.forEach(h),K=I(E),D=p(E,"DIV",{style:!0});var te=x(D);F=C(te,U),te.forEach(h),E.forEach(h),y.forEach(h),c.forEach(h),this.h()},h(){e(r,"width","100%"),e(r,"height","100%"),e(r,"display","block"),e(s,"margin","0 0 8px 0"),e(s,"font-size","14px"),e(i,"margin","2px"),e(i,"padding","6px 12px"),e(i,"background","#4CAF50"),e(f,"margin-bottom","8px"),e(o,"margin","2px"),e(o,"padding","6px 12px"),e(o,"background","#f44336"),e(b,"margin-bottom","8px"),e(D,"font-size","10px"),e(D,"color","#888"),e(l,"border-top","1px solid #444"),e(l,"padding-top","8px"),e(l,"margin-top","8px"),e(t,"position","absolute"),e(t,"right","8px"),e(t,"top","8px"),e(t,"background","rgba(0,0,0,.8)"),e(t,"color","#fff"),e(t,"padding","12px"),e(t,"border-radius","8px"),e(t,"font","12px system-ui"),e(t,"min-width","200px"),e(n,"position","fixed"),e(n,"inset","0"),e(n,"background","#1a1a2e")},m(v,c){ce(v,n,c),a(n,r),u[6](r),a(n,g),a(n,t),a(t,s),a(t,_),a(t,f),a(f,i),a(t,S),a(t,b),a(b,o),a(t,O),a(t,l),a(l,k),a(k,j),a(k,N),a(l,H),a(l,m),a(m,R),a(m,q),a(m,G),a(m,B),a(m,J),a(l,K),a(l,D),a(D,F),Q||(Z=[oe(i,"click",u[4]),oe(o,"click",u[5])],Q=!0)},p(v,[c]){c&2&&L(N,v[1]),c&4&&z!==(z=v[2].size()+"")&&L(q,z),c&4&&P!==(P=v[2].inUse()+"")&&L(B,P),c&8&&U!==(U=v[3]?"Texture loaded ✓":"Loading texture...")&&L(F,U)},i:ae,o:ae,d(v){v&&h(n),u[6](null),Q=!1,se(Z)}}}function ge(u,n,r){let g,t,s=0,T=null,_=ne(void 0,50),f=!1;async function i(){try{T=fe.from("/sprites/dragon_fly_128_sheet.svg"),r(2,_=ne(T,50)),r(3,f=!0),console.log("Dragon texture loaded successfully")}catch(o){console.error("Failed to load dragon texture:",o)}}function M(){if(!f||!T)return;const o=_.acquire();o.visible=!0,o.position.set(Math.random()*(t.renderer.width-128),Math.random()*(t.renderer.height-128)),o.scale.set(.5),t.stage.addChild(o),r(1,s++,s)}function S(){for(const o of[...t.stage.children])"texture"in o&&_.release(o),t.stage.removeChild(o);r(1,s=0)}ie(async()=>{t=new ve({view:g,backgroundAlpha:0}),await t.init({resizeTo:g.parentElement??window}),await i()}),le(()=>t?.destroy(!0,{children:!0}));function b(o){de[o?"unshift":"push"](()=>{g=o,r(0,g)})}return[g,s,_,f,M,S,b]}class we extends pe{constructor(n){super(),ue(this,n,ge,he,re,{})}}export{we as component};

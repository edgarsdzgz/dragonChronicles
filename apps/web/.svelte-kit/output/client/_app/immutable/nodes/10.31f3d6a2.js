import{s as it,n as lt,r as ut,b as pt}from"../chunks/scheduler.86f77edc.js";import{S as dt,i as ct,b as c,s as R,t as _,f,g as L,m as st,c as S,h,d as g,o as C,j as H,a as ft,k as t,p as x,n as j,q as F,l as tt}from"../chunks/index.e78d2784.js";import{g as rt}from"../chunks/logger.b2ea7501.js";function mt(a){let n,o,T="Logging Perf Lab",y,s,u,D,r,O,m,w,p,P,i,d,N,v,E,G,V,K,U,et="Export NDJSON",M,b,Q,q,W,A,X,B=a[2]?"yes":"no",J,Y,nt;return{c(){n=c("div"),o=c("h3"),o.textContent=T,y=R(),s=c("div"),u=c("label"),D=_("Rate (logs/sec) "),r=c("input"),O=R(),m=c("label"),w=_("Duration (s) "),p=c("input"),P=R(),i=c("div"),d=c("button"),N=_("Start"),v=R(),E=c("button"),G=_("Stop"),K=R(),U=c("button"),U.textContent=et,M=R(),b=c("div"),Q=_("Produced: "),q=_(a[3]),W=_(" Dropped: "),A=_(a[4]),X=_(" Running: "),J=_(B),this.h()},l(l){n=f(l,"DIV",{style:!0});var e=L(n);o=f(e,"H3",{"data-svelte-h":!0}),st(o)!=="svelte-1uzt7vn"&&(o.textContent=T),y=S(e),s=f(e,"DIV",{style:!0});var z=L(s);u=f(z,"LABEL",{});var Z=L(u);D=h(Z,"Rate (logs/sec) "),r=f(Z,"INPUT",{type:!0,min:!0,max:!0}),Z.forEach(g),O=S(z),m=f(z,"LABEL",{});var $=L(m);w=h($,"Duration (s) "),p=f($,"INPUT",{type:!0,min:!0,max:!0}),$.forEach(g),z.forEach(g),P=S(e),i=f(e,"DIV",{style:!0});var I=L(i);d=f(I,"BUTTON",{});var at=L(d);N=h(at,"Start"),at.forEach(g),v=S(I),E=f(I,"BUTTON",{});var ot=L(E);G=h(ot,"Stop"),ot.forEach(g),K=S(I),U=f(I,"BUTTON",{"data-svelte-h":!0}),st(U)!=="svelte-ghayiv"&&(U.textContent=et),I.forEach(g),M=S(e),b=f(e,"DIV",{});var k=L(b);Q=h(k,"Produced: "),q=h(k,a[3]),W=h(k," Dropped: "),A=h(k,a[4]),X=h(k," Running: "),J=h(k,B),k.forEach(g),e.forEach(g),this.h()},h(){C(r,"type","number"),C(r,"min","10"),C(r,"max","10000"),C(p,"type","number"),C(p,"min","1"),C(p,"max","30"),H(s,"margin-bottom","16px"),d.disabled=a[2],E.disabled=V=!a[2],H(i,"margin-bottom","16px"),H(n,"padding","12px"),H(n,"font","14px system-ui")},m(l,e){ft(l,n,e),t(n,o),t(n,y),t(n,s),t(s,u),t(u,D),t(u,r),x(r,a[0]),t(s,O),t(s,m),t(m,w),t(m,p),x(p,a[1]),t(n,P),t(n,i),t(i,d),t(d,N),t(i,v),t(i,E),t(E,G),t(i,K),t(i,U),t(n,M),t(n,b),t(b,Q),t(b,q),t(b,W),t(b,A),t(b,X),t(b,J),Y||(nt=[j(r,"input",a[8]),j(p,"input",a[9]),j(d,"click",a[5]),j(E,"click",a[6]),j(U,"click",a[7])],Y=!0)},p(l,[e]){e&1&&F(r.value)!==l[0]&&x(r,l[0]),e&2&&F(p.value)!==l[1]&&x(p,l[1]),e&4&&(d.disabled=l[2]),e&4&&V!==(V=!l[2])&&(E.disabled=V),e&8&&tt(q,l[3]),e&16&&tt(A,l[4]),e&4&&B!==(B=l[2]?"yes":"no")&&tt(J,B)},i:lt,o:lt,d(l){l&&g(n),Y=!1,ut(nt)}}}function vt(a,n,o){let T=100,y=10,s=!1,u=0,D=0,r;async function O(){o(2,s=!0),o(3,u=0),o(4,D=0),performance.now();const i=await rt(),d=1e3/T;r=setInterval(()=>{for(let v=0;v<1;v++){o(3,u++,u);try{i.log({t:Date.now(),lvl:"info",src:"ui",msg:"perf",data:{seq:u}})}catch{o(4,D++,D)}}},d),setTimeout(m,y*1e3)}function m(){s&&(clearInterval(r),o(2,s=!1))}pt(m);async function w(){const d=await(await rt()).exportNDJSON(),N=URL.createObjectURL(d),v=document.createElement("a");v.href=N,v.download="logs.ndjson",v.click(),URL.revokeObjectURL(N)}function p(){T=F(this.value),o(0,T)}function P(){y=F(this.value),o(1,y)}return[T,y,s,u,D,O,m,w,p,P]}class gt extends dt{constructor(n){super(),ct(this,n,vt,mt,it,{})}}export{gt as component};

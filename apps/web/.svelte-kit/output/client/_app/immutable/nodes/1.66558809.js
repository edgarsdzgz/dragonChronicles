import{s as ne,n as te,r as le,c as ie,o as ae}from"../chunks/scheduler.86f77edc.js";import{S as ce,i as de,s as k,b as p,C as R,t as Z,D as ue,d as c,c as E,f as g,g as y,m as A,E as P,h as K,o,a as Q,k as t,n as G,l as se}from"../chunks/index.e78d2784.js";import{s as he}from"../chunks/singletons.5ab518cc.js";import{g as fe}from"../chunks/logger.b2ea7501.js";const pe=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global,ge=()=>{const r=he;return{page:{subscribe:r.page.subscribe},navigating:{subscribe:r.navigating.subscribe},updated:r.updated}},ve={subscribe(r){return ge().page.subscribe(r)}};const{document:oe}=pe;function re(r){let i,s,e,l,u;return{c(){i=p("div"),s=p("small"),e=Z("Error ID: "),l=p("code"),u=Z(r[2]),this.h()},l(d){i=g(d,"DIV",{class:!0});var n=y(i);s=g(n,"SMALL",{});var C=y(s);e=K(C,"Error ID: "),l=g(C,"CODE",{class:!0});var v=y(l);u=K(v,r[2]),v.forEach(c),C.forEach(c),n.forEach(c),this.h()},h(){o(l,"class","svelte-afj2yc"),o(i,"class","error-id svelte-afj2yc")},m(d,n){Q(d,i,n),t(i,s),t(s,e),t(s,l),t(l,u)},p(d,n){n&4&&se(u,d[2])},d(d){d&&c(i)}}}function me(r){let i,s,e,l,u='<svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="15" y1="9" x2="9" y2="15"></line><line x1="9" y1="9" x2="15" y2="15"></line></svg>',d,n,C="Something went wrong",v,_,S="We encountered an unexpected error. Don't worry, your progress is safe.",x,B,w,L,X=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23,4 23,10 17,10"></polyline><polyline points="1,20 1,14 7,14"></polyline><path d="M20.49,9A9,9,0,0,0,5.64,5.64L1,10m22,4L18.36,18.36A9,9,0,0,1,3.51,15"></path></svg>
        Reload Page`,F,D,Y=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3,9L12,2L21,9V20A2,2,0,0,1,19,22H5A2,2,0,0,1,3,20Z"></path><polyline points="9,22 9,12 15,12 15,22"></polyline></svg>
        Go Home`,J,m,h,M,I,T,W,O=r[1]?"Exporting...":"Download Logs",V,q,z,$,a=r[2]!=="unknown"&&re(r);return{c(){i=k(),s=p("div"),e=p("div"),l=p("div"),l.innerHTML=u,d=k(),n=p("h1"),n.textContent=C,v=k(),_=p("p"),_.textContent=S,x=k(),a&&a.c(),B=k(),w=p("div"),L=p("button"),L.innerHTML=X,F=k(),D=p("button"),D.innerHTML=Y,J=k(),m=p("button"),h=R("svg"),M=R("path"),I=R("polyline"),T=R("line"),W=k(),V=Z(O),q=k(),this.h()},l(f){ue("svelte-16ie6ml",oe.head).forEach(c),i=E(f),s=g(f,"DIV",{class:!0});var ee=y(s);e=g(ee,"DIV",{class:!0});var b=y(e);l=g(b,"DIV",{class:!0,"data-svelte-h":!0}),A(l)!=="svelte-1me7wbz"&&(l.innerHTML=u),d=E(b),n=g(b,"H1",{class:!0,"data-svelte-h":!0}),A(n)!=="svelte-vc6ed9"&&(n.textContent=C),v=E(b),_=g(b,"P",{class:!0,"data-svelte-h":!0}),A(_)!=="svelte-1ep0nnb"&&(_.textContent=S),x=E(b),a&&a.l(b),B=E(b),w=g(b,"DIV",{class:!0});var H=y(w);L=g(H,"BUTTON",{class:!0,"data-svelte-h":!0}),A(L)!=="svelte-9i4x98"&&(L.innerHTML=X),F=E(H),D=g(H,"BUTTON",{class:!0,"data-svelte-h":!0}),A(D)!=="svelte-1bwg4be"&&(D.innerHTML=Y),J=E(H),m=g(H,"BUTTON",{class:!0});var U=y(m);h=P(U,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,stroke:!0,"stroke-width":!0});var N=y(h);M=P(N,"path",{d:!0}),y(M).forEach(c),I=P(N,"polyline",{points:!0}),y(I).forEach(c),T=P(N,"line",{x1:!0,y1:!0,x2:!0,y2:!0}),y(T).forEach(c),N.forEach(c),W=E(U),V=K(U,O),U.forEach(c),H.forEach(c),q=E(b),b.forEach(c),ee.forEach(c),this.h()},h(){oe.title="Error - Draconia Chronicles",o(l,"class","error-icon svelte-afj2yc"),o(n,"class","error-title svelte-afj2yc"),o(_,"class","error-message svelte-afj2yc"),o(L,"class","btn btn-primary svelte-afj2yc"),o(D,"class","btn btn-secondary svelte-afj2yc"),o(M,"d","M21,15V19A2,2,0,0,1,19,21H5A2,2,0,0,1,3,19V15"),o(I,"points","7,10 12,15 17,10"),o(T,"x1","12"),o(T,"y1","15"),o(T,"x2","12"),o(T,"y2","3"),o(h,"width","16"),o(h,"height","16"),o(h,"viewBox","0 0 24 24"),o(h,"fill","none"),o(h,"stroke","currentColor"),o(h,"stroke-width","2"),o(m,"class","btn btn-outline svelte-afj2yc"),m.disabled=r[1],o(w,"class","error-actions svelte-afj2yc"),o(e,"class","error-content svelte-afj2yc"),o(s,"class","error-container svelte-afj2yc")},m(f,j){Q(f,i,j),Q(f,s,j),t(s,e),t(e,l),t(e,d),t(e,n),t(e,v),t(e,_),t(e,x),a&&a.m(e,null),t(e,B),t(e,w),t(w,L),t(w,F),t(w,D),t(w,J),t(w,m),t(m,h),t(h,M),t(h,I),t(h,T),t(m,W),t(m,V),t(e,q),z||($=[G(L,"click",be),G(D,"click",ye),G(m,"click",r[3])],z=!0)},p(f,[j]){f[2]!=="unknown"?a?a.p(f,j):(a=re(f),a.c(),a.m(e,B)):a&&(a.d(1),a=null),j&2&&O!==(O=f[1]?"Exporting...":"Download Logs")&&se(V,O),j&2&&(m.disabled=f[1])},i:te,o:te,d(f){f&&(c(i),c(s)),a&&a.d(),z=!1,le($)}}}function be(){window.location.reload()}function ye(){window.location.href="/"}function we(r,i,s){let e,l,u;ie(r,ve,v=>s(4,u=v));let d="",n=!1;ae(()=>{e&&s(0,d=JSON.stringify({message:e.message,stack:e.stack,id:e.id,timestamp:new Date().toISOString(),url:u.url.toString(),userAgent:navigator.userAgent,viewport:{width:window.innerWidth,height:window.innerHeight}},null,2))});async function C(){if(!n){s(1,n=!0);try{const _=await(await fe()).exportNDJSON(),S=URL.createObjectURL(_),x=document.createElement("a");x.href=S,x.download=`draconia-logs-${new Date().toISOString().split("T")[0]}.ndjson`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(S)}catch(v){console.error("Failed to export logs:",v),alert("Failed to export logs. Check console for details.")}finally{s(1,n=!1)}}}return r.$$.update=()=>{r.$$.dirty&16&&(e=u.error),r.$$.dirty&16&&s(2,l=u.error?.id||"unknown")},[d,n,l,C,u]}let Ce=class extends ce{constructor(i){super(),de(this,i,we,me,ne,{})}};export{Ce as component};

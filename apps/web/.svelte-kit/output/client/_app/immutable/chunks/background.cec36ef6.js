const i={start(r,n){const e=setInterval(n,r);return()=>clearInterval(e)}},s=()=>document.visibilityState==="visible",c=500;let t=null,o=performance.now();function a(r=i){return{start(){t||(o=performance.now(),t=r.start(c,()=>{if(!s())return;const n=performance.now(),e=n-o;o=n,queueMicrotask(()=>{window.dispatchEvent(new CustomEvent("bg-tick",{detail:{dt:e}}))})}))},stop(){t&&(t(),t=null)},isRunning(){return t!==null}}}function u(r=i){const n=a(r);return n.start(),n}function l(){t&&(t(),t=null)}export{a as createBackgroundSim,u as startBackground,l as stopBackground};

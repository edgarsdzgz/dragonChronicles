var hr=Object.defineProperty;var mr=(e,t,n)=>t in e?hr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var I=(e,t,n)=>mr(e,typeof t!="symbol"?t+"":t,n);import"../chunks/CWj6FrbW.js";import{i as ze}from"../chunks/D73Tpz2-.js";import{C as gn,q as pr,A as _t,v as se,al as vr,x as gr,g as f,a1 as Dt,y as _r,H as br,z as Ot,B as bt,K as Ge,am as wr,an as yr,D as zt,G as Sr,F as kr,ao as Ft,P as X,ap as Ht,aq as _n,ar as bn,as as ft,I as wn,J as xr,at as ht,au as Dr,av as wt,aw as yn,ax as zr,ay as Pr,az as Er,aA as $r,$ as Zr,aB as Sn,N as Tr,aC as Ir,aD as Nr,aE as Ar,aF as Mr,aG as Rr,aH as Lr,aI as Cr,aJ as jr,b as A,M as Or,w as Re,aK as Ue,aj as kn,p as Pe,ad as It,aL as Fr,aM as Q,aN as Ve,i as ee,t as he,k as q,l as Ee,e as Se,aO as ot,W as H,aP as Hr,ag as Nt,j as He,m as y,s as S,n as w,aQ as j,o as re,ai as Bt,ak as Br}from"../chunks/CdgRmt9C.js";import{p as ge,b as Ur,i as xe,s as We,a as De}from"../chunks/DdHE955u.js";import{D as P,r as Vr}from"../chunks/rChfryCH.js";function Ie(e,t){return t}function Wr(e,t,n){for(var r=e.items,o=[],s=t.length,i=0;i<s;i++)Pr(t[i].e,o,!0);var a=s>0&&o.length===0&&n!==null;if(a){var c=n.parentNode;Er(c),c.append(n),r.clear(),ye(e,t[0].prev,t[s-1].next)}$r(o,()=>{for(var u=0;u<s;u++){var h=t[u];a||(r.delete(h.k),ye(e,h.prev,h.next)),yn(h.e,!a)}})}function Ne(e,t,n,r,o,s=null){var i=e,a={flags:t,items:new Map,first:null},c=(t&Sn)!==0;if(c){var u=e;i=se?_t(vr(u)):u.appendChild(gn())}se&&gr();var h=null,p=!1,g=new Map,v=Dt(()=>{var b=n();return bn(b)?b:b==null?[]:_n(b)}),d,x;function k(){Kr(x,d,a,g,i,o,t,r,n),s!==null&&(d.length===0?h?wn(h):h=zt(()=>s(i)):h!==null&&xr(h,()=>{h=null}))}pr(()=>{x??(x=Zr),d=f(v);var b=d.length;if(p&&b===0)return;p=b===0;let m=!1;if(se){var D=_r(i)===br;D!==(b===0)&&(i=Ot(),_t(i),bt(!1),m=!0)}if(se){for(var $=null,Z,_=0;_<b;_++){if(Ge.nodeType===wr&&Ge.data===yr){i=Ge,m=!0,bt(!1);break}var T=d[_],E=r(T,_);Z=Pt(Ge,a,$,null,T,E,_,o,t,n),a.items.set(E,Z),$=Z}b>0&&_t(Ot())}if(se)b===0&&s&&(h=zt(()=>s(i)));else if(Sr()){var L=new Set,R=kr;for(_=0;_<b;_+=1){T=d[_],E=r(T,_);var C=a.items.get(E)??g.get(E);C?t&(ht|ft)&&xn(C,T,_,t):(Z=Pt(null,a,null,null,T,E,_,o,t,n,!0),g.set(E,Z)),L.add(E)}for(const[U,te]of a.items)L.has(U)||R.skipped_effects.add(te.e);R.add_callback(k)}else k();m&&bt(!0),f(v)}),se&&(i=Ge)}function Kr(e,t,n,r,o,s,i,a,c){var ae,ce,pe,be;var u=(i&Ir)!==0,h=(i&(ht|ft))!==0,p=t.length,g=n.items,v=n.first,d=v,x,k=null,b,m=[],D=[],$,Z,_,T;if(u)for(T=0;T<p;T+=1)$=t[T],Z=a($,T),_=g.get(Z),_!==void 0&&((ae=_.a)==null||ae.measure(),(b??(b=new Set)).add(_));for(T=0;T<p;T+=1){if($=t[T],Z=a($,T),_=g.get(Z),_===void 0){var E=r.get(Z);if(E!==void 0){r.delete(Z),g.set(Z,E);var L=k?k.next:d;ye(n,k,E),ye(n,E,L),yt(E,L,o),k=E}else{var R=d?d.e.nodes_start:o;k=Pt(R,n,k,k===null?n.first:k.next,$,Z,T,s,i,c)}g.set(Z,k),m=[],D=[],d=k.next;continue}if(h&&xn(_,$,T,i),_.e.f&wt&&(wn(_.e),u&&((ce=_.a)==null||ce.unfix(),(b??(b=new Set)).delete(_))),_!==d){if(x!==void 0&&x.has(_)){if(m.length<D.length){var C=D[0],U;k=C.prev;var te=m[0],fe=m[m.length-1];for(U=0;U<m.length;U+=1)yt(m[U],C,o);for(U=0;U<D.length;U+=1)x.delete(D[U]);ye(n,te.prev,fe.next),ye(n,k,te),ye(n,fe,C),d=C,k=fe,T-=1,m=[],D=[]}else x.delete(_),yt(_,d,o),ye(n,_.prev,_.next),ye(n,_,k===null?n.first:k.next),ye(n,k,_),k=_;continue}for(m=[],D=[];d!==null&&d.k!==Z;)d.e.f&wt||(x??(x=new Set)).add(d),D.push(d),d=d.next;if(d===null)continue;_=d}m.push(_),k=_,d=_.next}if(d!==null||x!==void 0){for(var ne=x===void 0?[]:_n(x);d!==null;)d.e.f&wt||ne.push(d),d=d.next;var me=ne.length;if(me>0){var ke=i&Sn&&p===0?o:null;if(u){for(T=0;T<me;T+=1)(pe=ne[T].a)==null||pe.measure();for(T=0;T<me;T+=1)(be=ne[T].a)==null||be.fix()}Wr(n,ne,ke)}}u&&Tr(()=>{var we;if(b!==void 0)for(_ of b)(we=_.a)==null||we.apply()}),e.first=n.first&&n.first.e,e.last=k&&k.e;for(var _e of r.values())yn(_e.e);r.clear()}function xn(e,t,n,r){r&ht&&Ft(e.v,t),r&ft?Ft(e.i,n):e.i=n}function Pt(e,t,n,r,o,s,i,a,c,u,h){var p=(c&ht)!==0,g=(c&Dr)===0,v=p?g?X(o,!1,!1):Ht(o):o,d=c&ft?Ht(i):i,x={i:d,v,k:s,a:null,e:null,prev:n,next:r};try{if(e===null){var k=document.createDocumentFragment();k.append(e=gn())}return x.e=zt(()=>a(e,v,d,u),se),x.e.prev=n&&n.e,x.e.next=r&&r.e,n===null?h||(t.first=x):(n.next=x,n.e.next=x.e),r!==null&&(r.prev=x,r.e.prev=x.e),x}finally{}}function yt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==null&&s!==r;){var i=zr(s);o.before(s),s=i}}function ye(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}const Ut=[...` 	
\r\f¬†\v\uFEFF`];function qr(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var a=i+s;(i===0||Ut.includes(r[i-1]))&&(a===r.length||Ut.includes(r[a]))?r=(i===0?"":r.substring(0,i))+r.substring(a+1):i=a}}return r===""?null:r}function Yr(e,t){return e==null?null:String(e)}function Ze(e,t,n,r,o,s){var i=e.__className;if(se||i!==n||i===void 0){var a=qr(n,r,s);(!se||a!==e.getAttribute("class"))&&(a==null?e.removeAttribute("class"):e.className=a),e.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&e.classList.toggle(c,u)}return s}function Oe(e,t,n,r){var o=e.__style;if(se||o!==t){var s=Yr(t);(!se||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=t}return r}const Xr=Symbol("is custom element"),Gr=Symbol("is html");function Jr(e){if(se){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;$e(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var o=e.checked;$e(e,"checked",null),e.checked=o}}};e.__on_r=n,Lr(n),Cr()}}function $e(e,t,n,r){var o=Qr(e);se&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=n)&&(t==="loading"&&(e[Nr]=n),n==null?e.removeAttribute(t):typeof n!="string"&&eo(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Qr(e){return e.__attributes??(e.__attributes={[Xr]:e.nodeName.includes("-"),[Gr]:e.namespaceURI===Ar})}var Vt=new Map;function eo(e){var t=Vt.get(e.nodeName);if(t)return t;Vt.set(e.nodeName,t=[]);for(var n,r=e,o=Element.prototype;o!==r;){n=Rr(r);for(var s in n)n[s].set&&t.push(s);r=Mr(r)}return t}function to(e,t,n=t){jr(e,"change",r=>{var o=r?e.defaultChecked:e.checked;n(o)}),(se&&e.defaultChecked!==e.checked||A(t)==null)&&n(e.checked),Or(()=>{var r=t();e.checked=!!r})}function no(e){return function(...t){var n=t[0];return n.stopPropagation(),e==null?void 0:e.apply(this,t)}}function ro(e,t){var s;var n=(s=e.$$events)==null?void 0:s[t.type],r=bn(n)?n.slice():n==null?[]:[n];for(var o of r)o.call(this,t)}function oo(){return{saveVersion:110,currencies:{arcana:new P(1e3).toString(),forgegold:new P(0).toString(),dragonscales:new P(0).toString(),gems:new P(0).toString()},runTotalDistanceKm:new P(0).toString(),lifetimeTotalDistanceKm:new P(0).toString(),lifetimeMaxTotalDistanceKm:new P(0).toString(),currentLevel:1,levelDistanceKm:new P(0).toString(),enchants:{firepower:{level:0,tierUnlocked:1},scales:{level:0,tierUnlocked:1}},dragonHp:100,dragonMaxHp:100,travelState:"HOVERING",lastSaveTimestampMs:new P(Date.now()).toString(),ewma:{arcana:new P(0).toString(),alpha:new P(.2).toString()},notation:"scientific-ee@e100",debugMode:!1}}function so(){try{const e=localStorage.getItem("dragonChronicles_save");if(!e)return null;const t=JSON.parse(e);return!t.saveVersion||t.saveVersion<110?(ao(),null):io(t)}catch(e){return console.error("Failed to load save:",e),null}}function Wt(e){try{e.lastSaveTimestampMs=new P(Date.now()).toString();const t=JSON.stringify(e,null,2);localStorage.setItem("dragonChronicles_save",t)}catch(t){console.error("Failed to save to disk:",t)}}function io(e){var n,r;if(e.saveVersion!==110)throw new Error(`Unsupported save version: ${e.saveVersion}`);const t=oo();return{...t,...e,currencies:{...t.currencies,...e.currencies},enchants:{firepower:{...t.enchants.firepower,...(n=e.enchants)==null?void 0:n.firepower},scales:{...t.enchants.scales,...(r=e.enchants)==null?void 0:r.scales}},ewma:{...t.ewma,...e.ewma}}}function ao(){console.warn("Legacy save detected - showing invalidation modal")}class co{constructor(){I(this,"buffer",[]);I(this,"maxLines",5e3);I(this,"lastRateSampleTime",0);I(this,"rateSampleInterval",1e4)}addEvent(t){const n=JSON.stringify(t);this.buffer.push(n),this.buffer.length>this.maxLines&&this.buffer.shift(),this.persistBuffer()}logPurchase(t,n,r,o,s){this.addEvent({timestamp:Date.now(),event:"purchase",enchant:t,fromLevel:n,toLevel:r,costStr:o.toString(),arcanaAfterStr:s.toString()})}logTierUp(t,n,r,o){this.addEvent({timestamp:Date.now(),event:"tierUp",enchant:t,fromTier:n,costStr:r.toString(),arcanaAfterStr:o.toString()})}logOfflinePayout(t,n,r){this.addEvent({timestamp:Date.now(),event:"offlinePayout",elapsedSec:t.toString(),arcanaRateStr:n.toString(),arcanaGainStr:r.toString()})}logResetJourney(t,n){this.addEvent({timestamp:Date.now(),event:"resetJourney",runTotalDistanceKmStr:t.toString(),lifetimeTotalsStr:n.toString()})}logFormatBoundary(t,n,r){this.addEvent({timestamp:Date.now(),event:"formatBoundary",fromNotation:t,toNotation:n,valueStr:r.toString()})}logRateSample(t){const n=Date.now();n-this.lastRateSampleTime<this.rateSampleInterval||(this.lastRateSampleTime=n,this.addEvent({timestamp:n,event:"rateSamples",ewmaArcanaPerSecStr:t.toString()}))}logEnemySpawn(t,n,r,o){this.addEvent({timestamp:Date.now(),event:"enemySpawn",type:t,land:n,x:r,y:o})}logEnemyDeath(t,n,r){this.addEvent({timestamp:Date.now(),event:"enemyDeath",type:t,killedBy:n,overkillStr:r})}logEnemyHit(t,n){this.addEvent({timestamp:Date.now(),event:"enemyHit",type:t,amountStr:n.toString()})}logPlayerHit(t){this.addEvent({timestamp:Date.now(),event:"playerHit",amountStr:t.toString()})}logProjectileSpawn(t){this.addEvent({timestamp:Date.now(),event:"projectileSpawn",side:t})}logProjectileDespawn(t){this.addEvent({timestamp:Date.now(),event:"projectileDespawn",reason:t})}logBossSpawn(){this.addEvent({timestamp:Date.now(),event:"bossSpawn"})}logBossDeath(){this.addEvent({timestamp:Date.now(),event:"bossDeath"})}logFPSDrop(t,n){this.addEvent({timestamp:Date.now(),event:"fpsDrop",fps:t,durationMs:n})}exportNDJSON(){return this.buffer.join(`
`)}downloadLogs(){const t=this.exportNDJSON(),n=new Blob([t],{type:"application/x-ndjson"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=`dragonchronicles-logs-${new Date().toISOString().slice(0,19)}.ndjson`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r)}clearLogs(){this.buffer=[],localStorage.removeItem("dragonChronicles_telemetry")}getBufferSize(){return this.buffer.length}persistBuffer(){try{const t=JSON.stringify(this.buffer.slice(-1e3));localStorage.setItem("dragonChronicles_telemetry",t)}catch(t){console.warn("Failed to persist telemetry buffer:",t)}}loadPersistedBuffer(){try{const t=localStorage.getItem("dragonChronicles_telemetry");if(t){const n=JSON.parse(t);Array.isArray(n)&&(this.buffer=n)}}catch(t){console.warn("Failed to load persisted telemetry buffer:",t)}}}const oe=new co;typeof window<"u"&&oe.loadPersistedBuffer();function Be(e){const t=new P(e);if(!t.isFinite())return t.toString();if(t.eq(0))return"0";if(t.lt(0))return"-"+Be(t.abs());if(t.lt(1e4))return t.toFixed(2).replace(/\.?0+$/,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");if(t.lt("1e101")){const s=t.div(P.pow(10,t.log10().floor())),i=t.log10().floor().toNumber();return`${s.toFixed(2)}e${i}`}const n=t.log10(),r=n.log10().floor();return`${n.div(P.pow(10,r)).toFixed(2)}ee${r.toNumber()}`}const Dn=Re({km:0}),zn=Re({km:0});let M,F=null;const Te=kn(null,e=>{M=new Worker(new URL(""+new URL("../workers/worker110-DvcZApKE.js",import.meta.url).href,import.meta.url),{type:"module"});const t=so();return M.postMessage({type:"init",state:t}),t&&M.postMessage({type:"request-offline-apply"}),M.onmessage=n=>{const r=n.data;switch(r.type){case"state:update":if(F=r.state,e(r.state),zn.set({km:parseFloat(r.state.runTotalDistanceKm)}),F){const i={saveVersion:110,currencies:{arcana:F.currencies.arcana,forgegold:F.currencies.forgegold,dragonscales:F.currencies.dragonscales,gems:F.currencies.gems},runTotalDistanceKm:F.runTotalDistanceKm,lifetimeTotalDistanceKm:F.lifetimeTotalDistanceKm,lifetimeMaxTotalDistanceKm:F.lifetimeMaxTotalDistanceKm,currentLevel:F.currentLevel,levelDistanceKm:"0",enchants:F.enchants,dragonHp:F.dragonHp,dragonMaxHp:F.dragonMaxHp,travelState:F.travelState,lastSaveTimestampMs:new P(Date.now()).toString(),ewma:{arcana:F.ewmaArcanaPerSec,alpha:"0.2"},notation:"scientific-ee@e100",debugMode:F.debugMode};Math.random()<.1&&Wt(i)}break;case"toast":console.log("üçû Toast:",r.text);break;case"log":break;case"offline-welcome":const o=Math.round(r.elapsedHours*10)/10,s=Be(r.arcanaGain);console.log(`üåô Welcome back! You were away for ${o}h and gained ${s} Arcana`);break;case"error":console.error("‚ö†Ô∏è Worker Error:",r.message);break}},()=>{if(F){const n={saveVersion:110,currencies:F.currencies,runTotalDistanceKm:F.runTotalDistanceKm,lifetimeTotalDistanceKm:F.lifetimeTotalDistanceKm,lifetimeMaxTotalDistanceKm:F.lifetimeMaxTotalDistanceKm,currentLevel:F.currentLevel,levelDistanceKm:"0",enchants:F.enchants,dragonHp:F.dragonHp,dragonMaxHp:F.dragonMaxHp,travelState:F.travelState,lastSaveTimestampMs:new P(Date.now()).toString(),ewma:{arcana:F.ewmaArcanaPerSec,alpha:"0.2"},notation:"scientific-ee@e100",debugMode:F.debugMode};Wt(n)}M==null||M.terminate(),M=void 0}}),Pn=Ue(Te,e=>(e==null?void 0:e.currencies)||{arcana:"0",forgegold:"0",dragonscales:"0",gems:"0"}),lo=Ue(Te,e=>(e==null?void 0:e.enchants)||{firepower:{level:0,tierUnlocked:1},scales:{level:0,tierUnlocked:1}}),uo=Ue(Te,e=>({hp:(e==null?void 0:e.dragonHp)||100,maxHp:(e==null?void 0:e.dragonMaxHp)||100,hpPercentage:e?e.dragonHp/e.dragonMaxHp:1,travelState:(e==null?void 0:e.travelState)||"HOVERING"})),fo=Ue(Te,e=>({currentLevel:(e==null?void 0:e.currentLevel)||1,levelProgress:(e==null?void 0:e.levelProgress)||0,runTotalKm:(e==null?void 0:e.runTotalDistanceKm)||"0",lifetimeTotalKm:(e==null?void 0:e.lifetimeTotalDistanceKm)||"0",lifetimeMaxKm:(e==null?void 0:e.lifetimeMaxTotalDistanceKm)||"0"}));Ue(Te,e=>({arcanaPerSec:(e==null?void 0:e.ewmaArcanaPerSec)||"0",arcanaPerSecFormatted:Be((e==null?void 0:e.ewmaArcanaPerSec)||"0")}));function ho(){M==null||M.postMessage({type:"control",cmd:"start"})}function Kt(){M==null||M.postMessage({type:"control",cmd:"stop"})}function mo(){M==null||M.postMessage({type:"control",cmd:"reverse"})}function po(e){M==null||M.postMessage({type:"purchase-enchant",which:e})}function vo(e){M==null||M.postMessage({type:"tier-up",which:e})}function go(e,t){M==null||M.postMessage({type:"select-tier",which:e,tier:t})}function _o(){M==null||M.postMessage({type:"reset-run"})}function bo(e){M==null||M.postMessage({type:"debug",action:{type:"add-arcana",amount:e}})}function wo(e){M==null||M.postMessage({type:"debug",action:{type:"force-hp",percentage:e}})}function yo(e,t){const n=t.enchants[e],r=new P(t.currencies.arcana),o=e==="firepower"?10:12,s=new P(o).mul(P.pow(1.4,n.level)).ceil();return r.gte(s)&&n.level<500}function So(e){return"Land 1 | Verdant Dragonplains 0.00 km"}const En=Re(!1),Fe=e=>En.set(e);async function ko(){try{const e=await fetch("/enemy-config.json");if(!e.ok)throw Fe(!1),new Error("enemy-config.json missing");const t=await e.json();return Fe(!0),t}catch(e){throw Fe(!1),e}}class St{constructor(t,n){I(this,"pool",[]);I(this,"createFn");I(this,"resetFn");this.createFn=t,this.resetFn=n}acquire(){return this.pool.length>0?this.pool.pop():this.createFn()}release(t){this.resetFn(t),this.pool.push(t)}getPoolSize(){return this.pool.length}}class xo{constructor(t,n,r){I(this,"lambda");I(this,"minDelta");I(this,"maxDelta");I(this,"nextSpawnTime",0);this.lambda=1/t,this.minDelta=n*1e3,this.maxDelta=r*1e3,this.scheduleNext()}scheduleNext(){const t=Math.random(),n=-Math.log(t)/this.lambda,r=Math.max(this.minDelta/1e3,Math.min(this.maxDelta/1e3,n));this.nextSpawnTime=Date.now()+r*1e3}shouldSpawn(){return Date.now()>=this.nextSpawnTime?(this.scheduleNext(),!0):!1}adjustMeanInterval(t){this.lambda=this.lambda/t}}class Do{constructor(){I(this,"config",null);I(this,"isInitialized",!1);I(this,"enemies",[]);I(this,"projectiles",[]);I(this,"damageNumbers",[]);I(this,"enemyPool");I(this,"projectilePool");I(this,"damageNumberPool");I(this,"scheduler",null);I(this,"bossSpawned",!1);I(this,"bossEnemy",null);I(this,"regularSpawnsDisabled",!1);I(this,"combatWidth",800);I(this,"combatHeight",200);I(this,"dragonX",80);I(this,"dragonY",100);I(this,"playerIsReversing",!1);I(this,"playerIsTraveling",!1);I(this,"currentLand",1);I(this,"currentDistance",new P(0));I(this,"fpsDropStartTime",0);I(this,"onBossDeathCallback",null);I(this,"spawnCount",0);I(this,"cullCount",0);I(this,"lastSpawnTime",Date.now());I(this,"spawnsPerSecond",0);this.enemyPool=new St(()=>this.createEnemy(),t=>this.resetEnemy(t)),this.projectilePool=new St(()=>this.createProjectile(),t=>this.resetProjectile(t)),this.damageNumberPool=new St(()=>this.createDamageNumber(),t=>this.resetDamageNumber(t))}async initialize(){try{let t;try{t=await ko(),console.log("‚úÖ Loaded enemy config from /enemy-config.json")}catch(r){console.warn("‚ö†Ô∏è Config fetch failed, using embedded fallback:",r),t={spawning:{basicShooter:{meanIntervalSec:1.8,minDeltaSec:.6,maxDeltaSec:3.5}},movement:{ownSpeedX_px_per_s:140,attackRangeFrac_ofCombatWidth:.28,jitterPercent:.2,reverseSpawnSpeedScale:.9,reverseAdvanceSpeedScale:.75,overlapTolerancePx:5,arrivalEpsilonPx:2,arrivalJigglePx:6},projectiles:{enemy:{speedPx_per_s:480,lifetimeSec:2.5,fireIntervalMinSec:.85,fireIntervalMaxSec:1.35},player:{speedPx_per_s:600,lifetimeSec:2,chainHitsMax:1}},scaling:{hp:{baseL1_fracOfPlayerDamage:2.3,geometricGrowthPerLand:1.18,withinLandEndRatio:.85,withinLandStepMeters:5},damage:{baseL1_fracOfPlayerHP:.08,geometricGrowthPerLand:1.12,withinLandEndRatio:.85,withinLandStepMeters:5}},ui:{hpBars:{widthFracOfEnemy:.7,heightPx:4,showOnDamageOnlySec:1.2,colorHex:"#ffeb3b"},damageNumbers:{popScalePercent:120,popDurationMs:120,floatHeightPx:20,fadeOutSec:2.2,offsetLimitMs:250,offsetXPx:8,offsetYPx:6,colorPlayerDamage:"#ffffff",colorEnemyDamage:"#ff4444"}},bossLand10:{hpMultVsEndOfLand:2.8,dmgMultVsEndOfLand:2,fireIntervalMinSec:.8,fireIntervalMaxSec:1.2,burstShotCount:2,burstShotGapMs:150},caps:{enemies:48,projectiles:160,damageNumbers:120},performance:{fpsThrottleThreshold:55,fpsThrottleDurationMs:1e3,throttleSpawnRateFactor:.5}}}this.config=t;const n=this.config.spawning.basicShooter;this.scheduler=new xo(n.meanIntervalSec,n.minDeltaSec,n.maxDeltaSec),this.isInitialized=!0,console.log("üéØ Enemy system initialized successfully")}catch(t){throw console.error("‚ùå Critical: Enemy system initialization failed:",t),t}}createEnemy(){return{id:"",type:"basicShooter",state:"spawning",x:0,y:0,targetStopX:0,targetStopY:0,ownSpeedX:0,maxHP:new P(0),currentHP:new P(0),damage:new P(0),lastFireTime:0,nextFireDelay:0,spawnLand:1,spawnDistance:new P(0),hpBarVisible:!1,hpBarHideTimer:0}}createProjectile(){return{id:"",x:0,y:0,vx:0,vy:0,side:"enemy",spawnTime:0,lifetime:0,chainHitsRemaining:0}}createDamageNumber(){return{id:"",x:0,y:0,amount:"",color:"",spawnTime:0,offsetX:0,offsetY:0}}resetEnemy(t){t.state="spawning",t.currentHP=new P(0),t.hpBarVisible=!1,t.hpBarHideTimer=0}resetProjectile(t){t.chainHitsRemaining=0}resetDamageNumber(t){t.amount="",t.color=""}getEnemies(){return this.enemies}getProjectiles(){return this.projectiles}getDamageNumbers(){return this.damageNumbers}isReady(){return this.isInitialized&&this.config!==null}updateGameState(t,n,r,o,s,i,a,c){this.combatWidth=t,this.combatHeight=n,this.dragonX=r,this.dragonY=o,this.playerIsReversing=s,this.playerIsTraveling=i,this.currentLand=a,this.currentDistance=c}update(t){this.isReady()&&(this.updateSpawning(),this.updateEnemyMovement(t),this.updateEnemyHPBars(t),this.updateProjectiles(t),this.updateDamageNumbers(t),this.updateEnemyAttacks())}updateSpawning(){if(!(!this.scheduler||!this.config)&&this.playerIsTraveling){if(this.currentLand===10&&!this.bossSpawned&&this.getLandProgress(this.currentDistance,this.currentLand)>=.5){this.spawnBoss(),this.regularSpawnsDisabled=!0;return}!this.regularSpawnsDisabled&&this.scheduler.shouldSpawn()&&this.enemies.length<this.config.caps.enemies&&this.spawnEnemy("basicShooter")}}spawnBoss(){if(!this.config||this.bossSpawned)return;const t=this.enemyPool.acquire();t.id=`boss_land10_${Date.now()}`,t.type="basicShooter",t.state="spawning",t.x=this.combatWidth+32,t.y=this.combatHeight/2,t.ownSpeedX=this.config.movement.ownSpeedX_px_per_s;const n=this.calculateBossStats(this.currentLand,this.currentDistance);t.maxHP=n.hp,t.currentHP=n.hp,t.damage=n.damage;const r=this.config.bossLand10;t.nextFireDelay=this.randomBetween(r.fireIntervalMinSec*1e3,r.fireIntervalMaxSec*1e3),t.lastFireTime=Date.now(),t.spawnLand=this.currentLand,t.spawnDistance=this.currentDistance,this.enemies.push(t),this.bossEnemy=t,this.bossSpawned=!0,oe.logBossSpawn(),console.log("üêâ Boss spawned for Land 10!",{hp:n.hp.toString(),damage:n.damage.toString()})}getLandProgress(t,n){const r=this.getLandDistanceKm(n),o=this.getMetersIntoLand(t,n);return Math.min(1,o/(r*1e3))}spawnEnemy(t){if(!this.config)return;const n=this.enemyPool.acquire();n.id=`enemy_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n.type=t,n.state="spawning",n.x=this.combatWidth+32,n.y=Math.random()*this.combatHeight;const r=this.config.movement.ownSpeedX_px_per_s,o=1+(Math.random()-.5)*2*this.config.movement.jitterPercent;n.ownSpeedX=r*o,this.playerIsReversing&&(n.ownSpeedX*=this.config.movement.reverseSpawnSpeedScale),n.maxHP=this.calculateEnemyHP(t,this.currentLand,this.currentDistance),n.currentHP=n.maxHP,n.damage=this.calculateEnemyDamage(t,this.currentLand,this.currentDistance);const s=this.config.projectiles.enemy;n.nextFireDelay=this.randomBetween(s.fireIntervalMinSec*1e3,s.fireIntervalMaxSec*1e3),n.lastFireTime=Date.now(),n.spawnLand=this.currentLand,n.spawnDistance=this.currentDistance,this.enemies.push(n),this.spawnCount++;const i=Date.now(),a=(i-this.lastSpawnTime)/1e3;a>0&&(this.spawnsPerSecond=this.spawnsPerSecond*.9+1/a*.1),this.lastSpawnTime=i,oe.logEnemySpawn(t,this.currentLand,n.x,n.y),console.log(`üö® SPAWN DEBUG: Enemy spawned at (${n.x}, ${n.y}), traveling: ${this.playerIsTraveling}`)}updateEnemyMovement(t){if(!this.config)return;const n=this.calculateWorldScrollSpeed();for(const r of this.enemies){if(r.state==="dead")continue;const o=this.dragonX-r.x,s=this.dragonY-r.y,i=Math.sqrt(o*o+s*s);if(i>0){const c=o/i,u=s/i,h=this.config.movement.attackRangeFrac_ofCombatWidth*this.combatWidth;r.targetStopX=this.dragonX-c*h,r.targetStopY=this.dragonY-u*h}const a=Math.sqrt((r.x-r.targetStopX)**2+(r.y-r.targetStopY)**2);if(a<=this.config.movement.arrivalEpsilon_px){if(r.state!=="inRange"){r.state="inRange";const c=this.randomBetween(-6,6);r.y+=c,r.y=Math.max(0,Math.min(this.combatHeight,r.y)),this.resolveOverlapConflicts(r)}}else{r.state!=="advance"&&(r.state="advance");let c=n+r.ownSpeedX;this.playerIsReversing&&(c=n+r.ownSpeedX*this.config.movement.reverseAdvanceScale_outOfRange);const u=c*t/1e3;if(a>0){const h=(r.targetStopX-r.x)/a*u,p=(r.targetStopY-r.y)/a*u;r.x+=h,r.y+=p}}r.state==="inRange"&&this.playerIsReversing,(r.x<-100||r.x>this.combatWidth+100)&&this.despawnEnemy(r,"offscreen")}}calculateWorldScrollSpeed(){return this.playerIsReversing?-44:44}resolveOverlapConflicts(t){for(const r of this.enemies){if(r.id===t.id||r.state==="dead")continue;const o=Math.abs(t.x-r.x),s=Math.abs(t.y-r.y);if(o<5&&s<5){const i=this.randomBetween(-6,6),a=this.randomBetween(-6,6);t.x+=i,t.y+=a,t.x=Math.max(0,Math.min(this.combatWidth,t.x)),t.y=Math.max(0,Math.min(this.combatHeight,t.y));break}}}despawnEnemy(t,n){const r=t===this.bossEnemy&&n==="killed",o=this.enemies.indexOf(t);if(o!==-1&&this.enemies.splice(o,1),r&&this.handleBossDeath(),n==="killed"){const s=t.currentHP.lt(0)?t.currentHP.abs().toString():"0";oe.logEnemyDeath(t.type,"player",s),r&&oe.logBossDeath()}else n==="offscreen"&&oe.logEnemyDeath(t.type,"offscreen","0");t===this.bossEnemy&&(this.bossEnemy=null),this.enemyPool.release(t)}handleBossDeath(){console.log("üéâ Boss defeated! YOU WIN!"),this.regularSpawnsDisabled=!0,this.onBossDeathCallback&&this.onBossDeathCallback()}updateEnemyHPBars(t){if(!this.config)return;const n=this.config.ui.enemyHpBar;for(const r of this.enemies)if(r.state!=="dead")if(r.currentHP.gte(r.maxHP)&&r.hpBarVisible){r.hpBarHideTimer===0&&(r.hpBarHideTimer=Date.now());const o=n.hideDelayAtFullSec*1e3;Date.now()-r.hpBarHideTimer>=o&&(r.hpBarVisible=!1,r.hpBarHideTimer=0)}else r.currentHP.lt(r.maxHP)&&(r.hpBarVisible=n.visibleOnlyWhenDamaged,r.hpBarHideTimer=0)}updateProjectiles(t){if(!this.config)return;const n=Date.now();for(let r=this.projectiles.length-1;r>=0;r--){const o=this.projectiles[r];if((n-o.spawnTime)/1e3>=o.lifetime){this.despawnProjectile(o,"timeout");continue}const i=t/1e3;if(o.x+=o.vx*i,o.y+=o.vy*i,o.x<-32||o.x>this.combatWidth+32||o.y<-32||o.y>this.combatHeight+32){this.despawnProjectile(o,"offscreen");continue}if(o.side==="enemy"){if(this.checkProjectileDragonCollision(o)){const a=this.calculateProjectileDamage(o);this.damagePlayer(a),this.despawnProjectile(o,"hit")}}else if(o.side==="player"){const a=this.checkProjectileEnemyCollisions(o);if(a){const{enemy:c,killed:u,overkill:h}=a;u&&o.chainHitsRemaining>0?o.chainHitsRemaining--:this.despawnProjectile(o,"hit")}}}}checkProjectileDragonCollision(t){const r=t.x-this.dragonX,o=t.y-this.dragonY;return r*r+o*o<=24*24}checkProjectileEnemyCollisions(t){for(const r of this.enemies){if(r.state==="dead")continue;const o=12,s=t.x-r.x,i=t.y-r.y,a=s*s+i*i,c=2+o;if(a<=c*c){const u=this.calculatePlayerProjectileDamage(),h=this.damageEnemy(r.id,u);return{enemy:r,killed:h.killed,overkill:h.overkill}}}return null}calculateProjectileDamage(t){return new P(10)}calculatePlayerProjectileDamage(){return new P(15)}despawnProjectile(t,n){const r=this.projectiles.indexOf(t);r!==-1&&this.projectiles.splice(r,1),oe.logProjectileDespawn(n),this.projectilePool.release(t)}spawnEnemyProjectile(t){if(!this.config||this.projectiles.length>=this.config.caps.projectiles)return;const n=this.projectilePool.acquire();n.id=`proj_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n.side="enemy",n.x=t.x,n.y=t.y;const r=this.dragonX-t.x,o=this.dragonY-t.y,s=Math.sqrt(r*r+o*o);if(s>0){const i=this.config.projectiles.enemy.speed_px_per_s;n.vx=r/s*i,n.vy=o/s*i}n.spawnTime=Date.now(),n.lifetime=this.config.projectiles.enemy.lifetimeSec,n.chainHitsRemaining=0,this.projectiles.push(n),oe.logProjectileSpawn("enemy")}spawnPlayerProjectile(t,n,r,o){if(!this.config||this.projectiles.length>=this.config.caps.projectiles)return;const s=this.projectilePool.acquire();s.id=`proj_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s.side="player",s.x=t,s.y=n;const i=r-t,a=o-n,c=Math.sqrt(i*i+a*a);c>0&&(s.vx=i/c*600,s.vy=a/c*600),s.spawnTime=Date.now(),s.lifetime=3,s.chainHitsRemaining=this.config.projectiles.player.chainHitsMax,this.projectiles.push(s),oe.logProjectileSpawn("player")}updateDamageNumbers(t){if(!this.config)return;const n=Date.now(),r=this.config.ui.damageNumbers;for(let o=this.damageNumbers.length-1;o>=0;o--){const s=this.damageNumbers[o],i=(n-s.spawnTime)/1e3;if(i>=r.fadeDurationSec){this.despawnDamageNumber(s);continue}const a=.12;let c=1,u=0,h=1;if(i<=a){const p=i/a;c=1+(r.popScale-1)*p}else{c=r.popScale;const p=i-a,g=r.fadeDurationSec-a,v=p/g;u=-r.floatUpPx*v,h=1-v}s.y=s.offsetY+u,s.scale=c,s.opacity=h}}spawnDamageNumber(t,n,r,o){if(!this.config||this.damageNumbers.length>=this.config.caps.damageNumbers)return;const s=this.damageNumberPool.acquire(),i=this.config.ui.damageNumbers;if(s.id=`dmg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,s.amount=this.formatDamageAmount(r),s.color=o?i.playerHitColor:i.enemyHitColor,s.spawnTime=Date.now(),s.x=t,s.y=n,s.offsetY=n,this.getRecentDamageNumbers(250).length>0){s.offsetX=this.randomBetween(-i.offsetJitterX,i.offsetJitterX);const c=this.randomBetween(-i.offsetJitterY,i.offsetJitterY);s.offsetY+=c,s.y=s.offsetY,s.x+=s.offsetX}else s.offsetX=0;this.damageNumbers.push(s)}getRecentDamageNumbers(t){const n=Date.now();return this.damageNumbers.filter(r=>n-r.spawnTime<=t)}formatDamageAmount(t){return t.lt(1e3)?t.toFixed(0):t.lt(1e6)?(t.toNumber()/1e3).toFixed(1)+"K":t.toExponential(2)}despawnDamageNumber(t){const n=this.damageNumbers.indexOf(t);n!==-1&&this.damageNumbers.splice(n,1),this.damageNumberPool.release(t)}updateEnemyAttacks(){if(!this.config)return;const t=Date.now();for(const n of this.enemies){if(n.state!=="inRange")continue;t-n.lastFireTime>=n.nextFireDelay&&(n===this.bossEnemy?this.fireBossBurst(n):this.spawnEnemyProjectile(n),this.scheduleNextAttack(n),n.lastFireTime=t)}}fireBossBurst(t){if(!this.config)return;const n=this.config.bossLand10;this.spawnEnemyProjectile(t),setTimeout(()=>{t.state==="inRange"&&this.enemies.includes(t)&&this.spawnEnemyProjectile(t)},n.burstGapMs)}scheduleNextAttack(t){if(this.config)if(t===this.bossEnemy){const n=this.config.bossLand10;t.nextFireDelay=this.randomBetween(n.fireIntervalMinSec*1e3,n.fireIntervalMaxSec*1e3)}else{const n=this.config.projectiles.enemy;t.nextFireDelay=this.randomBetween(n.fireIntervalMinSec*1e3,n.fireIntervalMaxSec*1e3)}}calculateEnemyHP(t,n,r){if(!this.config)return new P(100);const o=this.getBaseHP(t),s=this.config.scaling.hpAcrossLandsMul,i=o.mul(P.pow(s,n-1)),a=this.calculateWithinLandMultiplier(n,r,s,"hp");return i.mul(a)}calculateEnemyDamage(t,n,r){if(!this.config)return new P(10);const o=this.getBaseDamage(t),s=this.config.scaling.dmgAcrossLandsMul,i=o.mul(P.pow(s,n-1)),a=this.calculateWithinLandMultiplier(n,r,s,"damage");return i.mul(a)}calculateWithinLandMultiplier(t,n,r,o){if(!this.config)return new P(1);const s=this.getLandDistanceKm(t),i=this.getMetersIntoLand(n,t),a=this.config.scaling.withinLandStepMeters,c=Math.floor(s*1e3/a),u=Math.floor(i/a);if(c<=0)return new P(1);const p=this.config.scaling.withinLandEndRatio*r,g=Math.pow(p,1/c);return new P(Math.pow(g,u))}getBaseHP(t){const n=new P(20);switch(t){case"basicShooter":return n.mul(2.3);default:return n.mul(2.3)}}getBaseDamage(t){const n=new P(100);switch(t){case"basicShooter":return n.mul(.08);default:return n.mul(.08)}}getLandDistanceKm(t){return 1.5*Math.pow(1.25,t-1)}getMetersIntoLand(t,n){return t.mod(this.getLandDistanceKm(n)*1e3).toNumber()}calculateBossStats(t,n){if(!this.config)return{hp:new P(1e3),damage:new P(50)};const r=this.calculateEnemyHP("basicShooter",t,n),o=this.calculateEnemyDamage("basicShooter",t,n),s=r.mul(this.config.bossLand10.hpMultVsEndOfLand),i=o.mul(this.config.bossLand10.dmgMultVsEndOfLand);return{hp:s,damage:i}}randomBetween(t,n){return t+Math.random()*(n-t)}setBossDeathCallback(t){this.onBossDeathCallback=t}isBossActive(){return this.bossEnemy!==null&&this.enemies.includes(this.bossEnemy)}getBoss(){return this.bossEnemy&&this.enemies.includes(this.bossEnemy)?this.bossEnemy:null}areSpawnsDisabled(){return this.regularSpawnsDisabled}clearAllEnemies(){for(;this.enemies.length>0;){const t=this.enemies.pop();this.enemyPool.release(t)}for(;this.projectiles.length>0;){const t=this.projectiles.pop();this.projectilePool.release(t)}for(;this.damageNumbers.length>0;){const t=this.damageNumbers.pop();this.damageNumberPool.release(t)}this.bossSpawned=!1}damageEnemy(t,n){const r=this.enemies.find(o=>o.id===t);if(!r||r.state==="dead")return{killed:!1,overkill:new P(0)};if(r.currentHP=r.currentHP.minus(n),r.hpBarVisible||(r.hpBarVisible=!0),this.spawnDamageNumber(r.x,r.y-10,n,!1),oe.logEnemyHit(r.type,n),r.currentHP.lte(0)){const o=r.currentHP.abs();return r.state="dead",this.despawnEnemy(r,"killed"),{killed:!0,overkill:o}}return{killed:!1,overkill:new P(0)}}damagePlayer(t){this.spawnDamageNumber(this.dragonX,this.dragonY-20,t,!0),oe.logPlayerHit(t)}getDebugInfo(){const t=this.enemies.filter(n=>n.state==="inRange").length;return{activeEnemies:this.enemies.length,activeProjectiles:this.projectiles.length,activeDamageNumbers:this.damageNumbers.length,spawnsPerSecond:this.spawnsPerSecond,cullCount:this.cullCount,inRangeCount:t,poolSizes:{enemies:this.enemyPool.getPoolSize(),projectiles:this.projectilePool.getPoolSize(),damageNumbers:this.damageNumberPool.getPoolSize()}}}}const ue=new Do,$n=Re({active:0,cap:48,inRange:0}),Zn=Re({active:0,cap:160}),Tn=Re({tracking:!1}),In=Re({spawnsEWMA:0,cullCount:0});var zo=ee(`<canvas style="
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    z-index: 1;
  " class="svelte-iyeoxk"></canvas>`);function Po(e,t){Pe(t,!1);const n=X(),r=X(),o=X();let s=ge(t,"combatWidth",8,800),i=ge(t,"combatHeight",8,200),a=ge(t,"dragonX",8,80),c=ge(t,"dragonY",8,100),u=ge(t,"playerIsReversing",8,!1),h=ge(t,"playerIsTraveling",8,!1),p=ge(t,"currentLand",8,1),g=ge(t,"currentDistance",8,"0"),v=X(),d,x,k=0;It(async()=>{if(!ue.isReady())try{await ue.initialize()}catch(E){console.error("Failed to initialize enemy system:",E);return}d=f(v).getContext("2d"),ot(v,f(v).width=s()),ot(v,f(v).height=i()),b()}),Fr(()=>{x&&cancelAnimationFrame(x)});function b(){const E=performance.now(),L=E-k;k=E,ue.updateGameState(s(),i(),a(),c(),u(),h(),p(),new P(g())),ue.update(L);const R=ue.getDebugInfo();$n.set({active:R.activeEnemies,cap:48,inRange:R.inRangeCount}),Zn.set({active:R.activeProjectiles,cap:160}),Tn.set({tracking:h()}),In.set({spawnsEWMA:R.spawnsPerSecond,cullCount:R.cullCount}),Dn.set({km:parseFloat(g())}),m(),x=requestAnimationFrame(b)}function m(){d.clearRect(0,0,s(),i()),D(),$(),Z(),_()}function D(){const E=ue.getBoss();for(const L of f(n)){if(L.state==="dead")continue;const R=L===E,C=R?20:12;d.fillStyle=R?"#8B0000":"#ff6b6b",d.beginPath(),d.arc(L.x,L.y,C,0,Math.PI*2),d.fill(),R&&(d.strokeStyle="#FF4500",d.lineWidth=2,d.stroke()),d.fillStyle="white",d.font=R?"bold 14px Arial":"10px Arial",d.textAlign="center",d.fillText(R?"BOSS":"E",L.x,L.y+(R?4:3))}}function $(){for(const E of f(r))E.side==="enemy"?d.fillStyle="#ff4444":d.fillStyle="#44ff44",d.beginPath(),d.arc(E.x,E.y,3,0,Math.PI*2),d.fill()}function Z(){for(const E of f(n)){if(E.state==="dead"||!E.hpBarVisible)continue;const L=24*.7,R=4,C=E.x-L/2,U=E.y-20;d.fillStyle="rgba(0, 0, 0, 0.5)",d.fillRect(C-1,U-1,L+2,R+2);const te=E.currentHP.div(E.maxHP).toNumber();d.fillStyle="#ffeb3b",d.fillRect(C,U,L*te,R),d.strokeStyle="rgba(255, 255, 255, 0.3)",d.lineWidth=1,d.strokeRect(C,U,L,R)}}function _(){for(const E of f(o)){const L=E.scale||1,R=E.opacity||1;d.save(),d.translate(E.x,E.y),d.scale(L,L),d.globalAlpha=R,d.fillStyle=E.color,d.font="bold 14px Arial",d.textAlign="center",d.strokeStyle="black",d.lineWidth=2,d.strokeText(E.amount,0,0),d.fillText(E.amount,0,0),d.restore()}}Q(()=>ue,()=>{H(n,ue.getEnemies())}),Q(()=>ue,()=>{H(r,ue.getProjectiles())}),Q(()=>ue,()=>{H(o,ue.getDamageNumbers())}),Q(()=>(f(v),Se(s()),Se(i())),()=>{f(v)&&(ot(v,f(v).width=s()),ot(v,f(v).height=i()))}),Ve(),ze();var T=zo();Ur(T,E=>H(v,E),()=>f(v)),he(()=>{$e(T,"width",s()),$e(T,"height",i())}),q(e,T),Ee()}var Eo=ee(`<div class="dialog-overlay svelte-m0hrd2"><div class="you-win-dialog svelte-m0hrd2"><div class="victory-header svelte-m0hrd2"><div class="victory-title svelte-m0hrd2">üéâ YOU WIN! üéâ</div> <div class="victory-subtitle svelte-m0hrd2">Land 10 Boss Defeated!</div></div> <div class="victory-content svelte-m0hrd2"><p class="victory-message svelte-m0hrd2">Congratulations! You have successfully defeated the mighty Land 10 boss 
          and conquered the Verdant Dragonplains!</p> <div class="victory-stats svelte-m0hrd2"><div class="stat-item svelte-m0hrd2"><span class="stat-label svelte-m0hrd2">Journey Complete</span> <span class="stat-value svelte-m0hrd2">Land 10 Cleared</span></div></div></div> <div class="victory-actions svelte-m0hrd2"><button class="return-btn svelte-m0hrd2">Return to Draconia</button></div></div></div>`);function $o(e,t){Pe(t,!1);const n=Hr();let r=ge(t,"show",8,!1);function o(){n("returnToDraconia")}ze();var s=Nt(),i=He(s);{var a=c=>{var u=Eo(),h=y(u),p=S(y(h),4),g=y(p);w(p),w(h),w(u),j("click",g,o),q(c,u)};xe(i,c=>{r()&&c(a)})}q(e,s),Ee()}function Zo(e,t){Pe(t,!1);const[n,r]=We();Ue([$n,Zn,In,Tn,Dn,zn,En],([i,a,c,u,h,p,g])=>({enemies:`${i.active}/${i.cap}`,projectiles:`${a.active}/${a.cap}`,spawnsPerSec:c.spawnsEWMA.toFixed(2),cullCount:c.cullCount,inRange:i.inRange,tracking:u.tracking?"YES":"NO",distance:`${h.km.toFixed(2)} / ${p.km.toFixed(2)} km`,cfgLoaded:g?"true":"false"})),ze();var o=Nt(),s=He(o);xe(s,i=>{}),q(e,o),Ee(),r()}const To=kn(!1);var Io=ee('<div class="combat-strip combat-root svelte-1suxhq1"><div class="distance-header svelte-1suxhq1"> </div> <div class="controls-row svelte-1suxhq1"><div class="controls svelte-1suxhq1"><button title="Reverse" aria-label="Reverse">‚óÄ</button> <button class="control-btn svelte-1suxhq1" title="Stop" aria-label="Stop">‚ñ†</button> <button title="Start" aria-label="Start">‚ñ∂</button></div> <div class="distance-bar svelte-1suxhq1" aria-label="Level Progress"><div class="fill svelte-1suxhq1"></div></div></div> <div class="dragon svelte-1suxhq1" aria-hidden="true">üêâ <div class="hp-chip svelte-1suxhq1"><div></div> <span class="hp-text svelte-1suxhq1"> </span></div></div> <!> <!></div> <!>',1);function No(e,t){Pe(t,!1);const[n,r]=We(),o=()=>De(To,"$debugOverlayEnabled",n),s=()=>De(fo,"$distanceState110",n),i=()=>De(uo,"$dragonState110",n),a=X(),c=X(),u=X(),h=X(),p=X(),g=X(),v=X(),d=X();let x=X(!1);It(()=>{ue.setBossDeathCallback(()=>{H(x,!0),Kt()})});function k(){H(x,!1),console.log("Returning to Draconia - journey reset needed")}function b(){mo()}function m(){Kt()}function D(){ho()}Q(()=>o(),()=>{H(a,o())}),Q(()=>(s(),P),()=>{H(c,s()?So(new P(s().runTotalKm)):"Land 1 | Verdant Dragonplains 0.00 km")}),Q(()=>i(),()=>{H(u,i().travelState==="ADVANCING")}),Q(()=>i(),()=>{H(h,i().travelState==="RETREATING")}),Q(()=>(s(),P),()=>{H(p,s()?s().currentLevel>1||new P(s().runTotalKm).gt(0):!1)}),Q(()=>(f(u),f(h)),()=>{H(g,f(u)||f(h))}),Q(()=>i(),()=>{H(v,i().hpPercentage)}),Q(()=>f(v),()=>{H(d,f(v)<=.05?"critical":f(v)<=.1?"low":f(v)<=.3?"warning":"normal")}),Ve(),ze();var $=Io(),Z=He($),_=y(Z),T=y(_,!0);w(_);var E=S(_,2),L=y(E),R=y(L);let C;var U=S(R,2),te=S(U,2);let fe;w(L);var ne=S(L,2),me=y(ne);w(ne),w(E);var ke=S(E,2),_e=S(y(ke)),ae=y(_e),ce=S(ae,2),pe=y(ce,!0);w(ce),w(_e),w(ke);var be=S(ke,2);{let le=Dt(()=>(s(),A(()=>{var ve;return((ve=s())==null?void 0:ve.currentLevel)||1}))),je=Dt(()=>(s(),A(()=>{var ve;return((ve=s())==null?void 0:ve.runTotalKm)||"0"})));Po(be,{combatWidth:800,combatHeight:250,dragonX:80,dragonY:125,get playerIsReversing(){return f(h)},get playerIsTraveling(){return f(g)},get currentLand(){return f(le)},get currentDistance(){return f(je)}})}var we=S(be,2);{var qe=le=>{Zo(le,{})};xe(we,le=>{f(a)&&le(qe)})}w(Z);var Ye=S(Z,2);$o(Ye,{get show(){return f(x)},set show(le){H(x,le)},$$events:{returnToDraconia:k},$$legacy:!0}),he((le,je)=>{re(T,f(c)),C=Ze(R,1,"control-btn svelte-1suxhq1",null,C,le),R.disabled=!f(p),U.disabled=!f(g),fe=Ze(te,1,"control-btn svelte-1suxhq1",null,fe,je),te.disabled=f(g),Oe(me,`width: ${s(),A(()=>{var ve;return(ve=s())!=null&&ve.levelProgress?s().levelProgress*100:0})??""}%`),Ze(ae,1,`hp-bar ${f(d)??""}`,"svelte-1suxhq1"),Oe(ae,`width: ${f(v)*100}%`),re(pe,(i(),A(()=>i().hp)))},[()=>({active:f(h)}),()=>({active:f(u)})]),j("click",R,b),j("click",U,m),j("click",te,D),q(e,$),Ee(),r()}var Ao=ee('<div><div class="currency-icon svelte-1skompy"> </div> <div class="currency-name svelte-1skompy"> </div> <div class="currency-amount svelte-1skompy"><!></div></div>'),Mo=ee('<aside class="currency-rail svelte-1skompy"><div class="currency-content svelte-1skompy"></div></aside>');function Ro(e,t){Pe(t,!1);const[n,r]=We(),o=()=>De(Pn,"$currencies110",n),s=X();function i(u){return Be(new P(u))}Q(()=>o(),()=>{H(s,[{icon:"üîÆ",name:"Arcana",amount:o().arcana,locked:!1},{icon:"ü™ô",name:"Forgegold",amount:o().forgegold,locked:!0},{icon:"üê≤",name:"Dragonscales",amount:o().dragonscales,locked:!0},{icon:"üíé",name:"Gems",amount:o().gems,locked:!0},{icon:"‚ö°",name:"Essence",amount:"0",locked:!0},{icon:"üåü",name:"Stardust",amount:"0",locked:!0}])}),Ve(),ze();var a=Mo(),c=y(a);Ne(c,5,()=>f(s),Ie,(u,h)=>{var p=Ao();let g;var v=y(p),d=y(v,!0);w(v);var x=S(v,2),k=y(x,!0);w(x);var b=S(x,2),m=y(b);{var D=Z=>{var _=Bt("üîí");q(Z,_)},$=Z=>{var _=Bt();he(T=>re(_,T),[()=>(f(h),A(()=>i(f(h).amount)))]),q(Z,_)};xe(m,Z=>{f(h),A(()=>f(h).locked)?Z(D):Z($,!1)})}w(b),w(p),he(Z=>{g=Ze(p,1,"currency-item svelte-1skompy",null,g,Z),re(d,(f(h),A(()=>f(h).icon))),re(k,(f(h),A(()=>f(h).name)))},[()=>({locked:f(h).locked})]),q(u,p)}),w(c),w(a),q(e,a),Ee(),r()}var Lo=ee('<button type="button" role="tab"> </button>'),Co=ee('<button type="button" role="tab"> </button>'),jo=ee('<div class="modal-overlay svelte-1qe57pb" role="button" tabindex="0"><div class="modal-dialog svelte-1qe57pb" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1"><h2 id="modal-title" class="modal-title svelte-1qe57pb">Return to Draconia?</h2> <p class="modal-body svelte-1qe57pb">This resets your journey and enchant progress. Continue?</p> <div class="modal-buttons svelte-1qe57pb"><button class="modal-btn cancel svelte-1qe57pb">Cancel</button> <button class="modal-btn reset svelte-1qe57pb">Reset Journey</button></div></div></div>'),Oo=ee('<nav class="tabs-row svelte-1qe57pb"><div class="tabs-left svelte-1qe57pb" role="tablist" aria-label="Gameplay Tabs"></div> <div class="tabs-right svelte-1qe57pb" role="tablist" aria-label="Meta Tabs"></div></nav> <!>',1);function Fo(e,t){Pe(t,!1);let n=ge(t,"activeTab",8),r=ge(t,"setActiveTab",8),o=X(!1);const s=[{id:"enchant",label:"Enchant"},{id:"return",label:"Return to Draconia"}],i=[{id:"settings",label:"Settings"}];function a(k){k==="return"?H(o,!0):r()(k)}function c(){H(o,!1)}function u(){_o(),H(o,!1),r()("enchant")}ze();var h=Oo(),p=He(h),g=y(p);Ne(g,5,()=>s,Ie,(k,b)=>{var m=Lo(),D=y(m,!0);w(m),he(()=>{Ze(m,1,`tab ${Se(n()),f(b),A(()=>n()===f(b).id?"selected":"")??""}`,"svelte-1qe57pb"),$e(m,"aria-selected",(Se(n()),f(b),A(()=>n()===f(b).id))),$e(m,"tabindex",(Se(n()),f(b),A(()=>n()===f(b).id?0:-1))),re(D,(f(b),A(()=>f(b).label)))}),j("click",m,()=>a(f(b).id)),j("keydown",m,$=>($.key==="Enter"||$.key===" ")&&a(f(b).id)),q(k,m)}),w(g);var v=S(g,2);Ne(v,5,()=>i,Ie,(k,b)=>{var m=Co(),D=y(m,!0);w(m),he(()=>{Ze(m,1,`tab ${Se(n()),f(b),A(()=>n()===f(b).id?"selected":"")??""}`,"svelte-1qe57pb"),$e(m,"aria-selected",(Se(n()),f(b),A(()=>n()===f(b).id))),$e(m,"tabindex",(Se(n()),f(b),A(()=>n()===f(b).id?0:-1))),re(D,(f(b),A(()=>f(b).label)))}),j("click",m,()=>a(f(b).id)),j("keydown",m,$=>($.key==="Enter"||$.key===" ")&&a(f(b).id)),q(k,m)}),w(v),w(p);var d=S(p,2);{var x=k=>{var b=jo(),m=y(b),D=S(y(m),4),$=y(D),Z=S($,2);w(D),w(m),w(b),j("click",$,c),j("click",Z,u),j("click",m,no(function(_){ro.call(this,t,_)})),j("keydown",m,_=>_.key==="Escape"&&c()),j("click",b,c),j("keydown",b,_=>_.key==="Escape"&&c()),q(k,b)};xe(d,k=>{f(o)&&k(x)})}q(e,h),Ee()}const Ho={firepower:new P(10),scales:new P(12)};function Nn(e,t){if(t>=500)return new P(1/0);const n=Ho[e],o=t+1-1;return n.mul(P.pow(1.4,o)).ceil()}function mt(e){switch(e){case 1:return[0,50];case 2:return[51,200];case 3:return[201,500]}}function An(e,t){if(t>=3)return new P(1/0);const[,n]=mt(t);return Nn(e,n-1).mul(3)}function Bo(e,t,n){if(e.tierUnlocked>=3)return!1;const[,r]=mt(e.tierUnlocked);if(e.level<r)return!1;const o=An(n,e.tierUnlocked);return t.gte(o)}function st(e,t){const[n,r]=mt(t);if(e<n)return 0;if(e>=r)return 1;const o=r-n;return(e-n)/o}function Uo(e){const[t,n]=mt(e),r=[],o=n-t;for(let s=t+10;s<n;s+=10){const i=(s-t)/o;r.push(i*100)}return r}var Vo=ee("<button> </button>"),Wo=ee('<div class="tick-marker svelte-iwts9g"></div>'),Ko=ee("<button> </button>"),qo=ee('<div class="tick-marker svelte-iwts9g"></div>'),Yo=ee('<section class="enchant-section svelte-iwts9g"><div class="enchant-row svelte-iwts9g"><div class="purchase-button svelte-iwts9g"><button class="purchase-btn svelte-iwts9g"><div class="purchase-name svelte-iwts9g">Firepower</div> <div class="purchase-cost svelte-iwts9g"> </div> <div class="purchase-level svelte-iwts9g"> </div></button></div> <div class="enchant-center svelte-iwts9g"><div class="tier-tabs svelte-iwts9g"></div> <div class="tier-progress-bar svelte-iwts9g"><div class="progress-fill firepower svelte-iwts9g"></div> <!></div></div> <div class="tier-up-button svelte-iwts9g"><button class="tier-up-btn svelte-iwts9g">TIER UP <div class="tier-up-cost svelte-iwts9g"> </div></button></div></div> <div class="enchant-row svelte-iwts9g"><div class="purchase-button svelte-iwts9g"><button class="purchase-btn svelte-iwts9g"><div class="purchase-name svelte-iwts9g">Scales</div> <div class="purchase-cost svelte-iwts9g"> </div> <div class="purchase-level svelte-iwts9g"> </div></button></div> <div class="enchant-center svelte-iwts9g"><div class="tier-tabs svelte-iwts9g"></div> <div class="tier-progress-bar svelte-iwts9g"><div class="progress-fill scales svelte-iwts9g"></div> <!></div></div> <div class="tier-up-button svelte-iwts9g"><button class="tier-up-btn svelte-iwts9g">TIER UP <div class="tier-up-cost svelte-iwts9g"> </div></button></div></div></section>');function Xo(e,t){Pe(t,!1);const[n,r]=We(),o=()=>De(lo,"$enchants110",n),s=()=>De(Pn,"$currencies110",n),i=()=>De(Te,"$gameState110",n),a=X(),c=X();function u(O){po(O)}function h(O,V){const K=f(a)[O];V<=K.tierUnlocked&&go(O,V)}function p(O){vo(O)}function g(O){const V=Nn(O,f(a)[O].level);return Be(V)}function v(O){return i()?yo(O,i()):!1}function d(O){const V=f(a)[O];return Bo(V,f(c),O)}function x(O){const V=An(O,f(a)[O].tierUnlocked);return Be(V)}function k(O){return Uo(O)}Q(()=>o(),()=>{H(a,o())}),Q(()=>s(),()=>{H(c,new P(s().arcana))}),Ve(),ze();var b=Yo(),m=y(b),D=y(m),$=y(D),Z=S(y($),2),_=y(Z);w(Z);var T=S(Z,2),E=y(T);w(T),w($),w(D);var L=S(D,2),R=y(L);Ne(R,4,()=>[1,2,3],Ie,(O,V)=>{var K=Vo(),Xe=y(K);w(K),he(()=>{Ze(K,1,`tier-tab ${V===1?"active":""}`,"svelte-iwts9g"),K.disabled=(f(a),A(()=>V>f(a).firepower.tierUnlocked)),re(Xe,`T${V??""}`)}),j("click",K,()=>h("firepower",V)),q(O,K)}),w(R);var C=S(R,2),U=y(C),te=S(U,2);Ne(te,1,()=>A(()=>k(1)),Ie,(O,V)=>{var K=Wo();he(()=>Oe(K,`left: ${f(V)??""}%`)),q(O,K)}),w(C),w(L);var fe=S(L,2),ne=y(fe),me=S(y(ne)),ke=y(me);w(me),w(ne),w(fe),w(m);var _e=S(m,2),ae=y(_e),ce=y(ae),pe=S(y(ce),2),be=y(pe);w(pe);var we=S(pe,2),qe=y(we);w(we),w(ce),w(ae);var Ye=S(ae,2),le=y(Ye);Ne(le,4,()=>[1,2,3],Ie,(O,V)=>{var K=Ko(),Xe=y(K);w(K),he(()=>{Ze(K,1,`tier-tab ${V===1?"active":""}`,"svelte-iwts9g"),K.disabled=(f(a),A(()=>V>f(a).scales.tierUnlocked)),re(Xe,`T${V??""}`)}),j("click",K,()=>h("scales",V)),q(O,K)}),w(le);var je=S(le,2),ve=y(je),sr=S(ve,2);Ne(sr,1,()=>A(()=>k(1)),Ie,(O,V)=>{var K=qo();he(()=>Oe(K,`left: ${f(V)??""}%`)),q(O,K)}),w(je),w(Ye);var Ct=S(Ye,2),rt=y(Ct),jt=S(y(rt)),ir=y(jt);w(jt),w(rt),w(Ct),w(_e),w(b),he((O,V,K,Xe,ar,cr,lr,ur,dr,fr)=>{$.disabled=O,re(_,`Cost: ${V??""} Arcana`),re(E,`Lvl ${f(a),A(()=>f(a).firepower.level)??""} ‚Üí ${f(a),A(()=>f(a).firepower.level+1)??""}`),Oe(U,`width: ${K??""}%`),ne.disabled=Xe,re(ke,`${ar??""} Arcana`),ce.disabled=cr,re(be,`Cost: ${lr??""} Arcana`),re(qe,`Lvl ${f(a),A(()=>f(a).scales.level)??""} ‚Üí ${f(a),A(()=>f(a).scales.level+1)??""}`),Oe(ve,`width: ${ur??""}%`),rt.disabled=dr,re(ir,`${fr??""} Arcana`)},[()=>A(()=>!v("firepower")),()=>A(()=>g("firepower")),()=>(Se(st),f(a),A(()=>st(f(a).firepower.level,1)*100)),()=>A(()=>!d("firepower")),()=>A(()=>x("firepower")),()=>A(()=>!v("scales")),()=>A(()=>g("scales")),()=>(Se(st),f(a),A(()=>st(f(a).scales.level,1)*100)),()=>A(()=>!d("scales")),()=>A(()=>x("scales"))]),j("click",$,()=>u("firepower")),j("click",ne,()=>p("firepower")),j("click",ce,()=>u("scales")),j("click",rt,()=>p("scales")),q(e,b),Ee(),r()}var Go=ee('<div class="debug-controls svelte-1sx7m23"><h4 class="svelte-1sx7m23">Debug Controls</h4> <div class="debug-group svelte-1sx7m23"><h5 class="svelte-1sx7m23">Add Arcana</h5> <div class="button-row svelte-1sx7m23"><button class="btn-debug svelte-1sx7m23">+10</button> <button class="btn-debug svelte-1sx7m23">+1e3</button> <button class="btn-debug svelte-1sx7m23">+1e6</button></div></div> <div class="debug-group svelte-1sx7m23"><h5 class="svelte-1sx7m23">Force HP %</h5> <div class="button-row svelte-1sx7m23"><button class="btn-debug svelte-1sx7m23">100%</button> <button class="btn-debug svelte-1sx7m23">50%</button> <button class="btn-debug svelte-1sx7m23">20%</button> <button class="btn-debug svelte-1sx7m23">10%</button> <button class="btn-debug svelte-1sx7m23">5%</button></div></div></div>'),Jo=ee('<div class="settings-page svelte-1sx7m23"><div class="settings-header svelte-1sx7m23"><h1 class="svelte-1sx7m23">Settings</h1></div> <div class="settings-content svelte-1sx7m23"><section class="settings-section svelte-1sx7m23"><div class="coming-soon svelte-1sx7m23"><h2 class="svelte-1sx7m23">Settings Coming Soon‚Ä¶</h2> <p class="svelte-1sx7m23">Advanced game settings and preferences will be available in future updates.</p></div></section> <section class="settings-section svelte-1sx7m23"><h3 class="svelte-1sx7m23">Data & Logs</h3> <div class="setting-row svelte-1sx7m23"><div class="setting-info svelte-1sx7m23"><strong class="svelte-1sx7m23">Download Logs</strong> <p class="svelte-1sx7m23"> </p></div> <button class="btn-primary svelte-1sx7m23">Download Logs</button></div> <div class="setting-row svelte-1sx7m23"><div class="setting-info svelte-1sx7m23"><strong class="svelte-1sx7m23">Clear Logs</strong> <p class="svelte-1sx7m23">Remove all stored telemetry data</p></div> <button class="btn-secondary svelte-1sx7m23">Clear All Logs</button></div></section> <section class="settings-section svelte-1sx7m23"><div class="setting-row svelte-1sx7m23"><div class="setting-info svelte-1sx7m23"><strong class="svelte-1sx7m23">Debug Mode</strong> <p class="svelte-1sx7m23">Enable developer controls and testing features</p></div> <label class="toggle svelte-1sx7m23"><input type="checkbox" class="svelte-1sx7m23"/> <span class="toggle-slider svelte-1sx7m23"></span></label></div> <!></section></div></div>');function Qo(e,t){Pe(t,!1);const[n,r]=We(),o=()=>De(Te,"$gameState110",n),s=X(),i=X();function a(C){bo(C)}function c(C){wo(C)}function u(){oe.downloadLogs()}function h(){oe.clearLogs()}Q(()=>o(),()=>{var C;H(s,((C=o())==null?void 0:C.debugMode)||!1)}),Q(()=>oe,()=>{H(i,oe.getBufferSize())}),Ve(),ze();var p=Jo(),g=S(y(p),2),v=S(y(g),2),d=S(y(v),2),x=y(d),k=S(y(x),2),b=y(k);w(k),w(x);var m=S(x,2);w(d);var D=S(d,2),$=S(y(D),2);w(D),w(v);var Z=S(v,2),_=y(Z),T=S(y(_),2),E=y(T);Jr(E),Br(2),w(T),w(_);var L=S(_,2);{var R=C=>{var U=Go(),te=S(y(U),2),fe=S(y(te),2),ne=y(fe),me=S(ne,2),ke=S(me,2);w(fe),w(te);var _e=S(te,2),ae=S(y(_e),2),ce=y(ae),pe=S(ce,2),be=S(pe,2),we=S(be,2),qe=S(we,2);w(ae),w(_e),w(U),j("click",ne,()=>a(10)),j("click",me,()=>a(1e3)),j("click",ke,()=>a(1e6)),j("click",ce,()=>c(100)),j("click",pe,()=>c(50)),j("click",be,()=>c(20)),j("click",we,()=>c(10)),j("click",qe,()=>c(5)),q(C,U)};xe(L,C=>{f(s)&&C(R)})}w(Z),w(g),w(p),he(()=>re(b,`Export gameplay telemetry as NDJSON format (${f(i)??""} events)`)),j("click",m,u),j("click",$,h),to(E,()=>f(s),C=>H(s,C)),q(e,p),Ee(),r()}function l(e,t,n){function r(a,c){var u;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(u=a._zod).traits??(u.traits=new Set),a._zod.traits.add(e),t(a,c);for(const h in i.prototype)h in a||Object.defineProperty(a,h,{value:i.prototype[h].bind(a)});a._zod.constr=i,a._zod.def=c}const o=(n==null?void 0:n.Parent)??Object;class s extends o{}Object.defineProperty(s,"name",{value:e});function i(a){var c;const u=n!=null&&n.Parent?new s:this;r(u,a),(c=u._zod).deferred??(c.deferred=[]);for(const h of u._zod.deferred)h();return u}return Object.defineProperty(i,"init",{value:r}),Object.defineProperty(i,Symbol.hasInstance,{value:a=>{var c,u;return n!=null&&n.Parent&&a instanceof n.Parent?!0:(u=(c=a==null?void 0:a._zod)==null?void 0:c.traits)==null?void 0:u.has(e)}}),Object.defineProperty(i,"name",{value:e}),i}class et extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Mn={};function Ae(e){return Mn}function es(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,o])=>t.indexOf(+r)===-1).map(([r,o])=>o)}function Et(e,t){return typeof t=="bigint"?t.toString():t}function Rn(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function At(e){return e==null}function Mt(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function ts(e,t){const n=(e.toString().split(".")[1]||"").length,r=t.toString();let o=(r.split(".")[1]||"").length;if(o===0&&/\d?e-\d?/.test(r)){const c=r.match(/\d?e-(\d?)/);c!=null&&c[1]&&(o=Number.parseInt(c[1]))}const s=n>o?n:o,i=Number.parseInt(e.toFixed(s).replace(".","")),a=Number.parseInt(t.toFixed(s).replace(".",""));return i%a/10**s}const qt=Symbol("evaluating");function B(e,t,n){let r;Object.defineProperty(e,t,{get(){if(r!==qt)return r===void 0&&(r=qt,r=n()),r},set(o){Object.defineProperty(e,t,{value:o})},configurable:!0})}function ns(e){return Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e))}function Le(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function Ke(...e){const t={};for(const n of e){const r=Object.getOwnPropertyDescriptors(n);Object.assign(t,r)}return Object.defineProperties({},t)}function Yt(e){return JSON.stringify(e)}const Ln="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function $t(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const rs=Rn(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function ut(e){if($t(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!($t(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Cn(e){return ut(e)?{...e}:e}const os=new Set(["string","number","symbol"]);function pt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ce(e,t,n){const r=new e._zod.constr(t??e._zod.def);return(!t||n!=null&&n.parent)&&(r._zod.parent=e),r}function z(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function ss(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const is={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function as(e,t){const n=e._zod.def,r=Ke(e._zod.def,{get shape(){const o={};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(o[s]=n.shape[s])}return Le(this,"shape",o),o},checks:[]});return Ce(e,r)}function cs(e,t){const n=e._zod.def,r=Ke(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete o[s]}return Le(this,"shape",o),o},checks:[]});return Ce(e,r)}function ls(e,t){if(!ut(t))throw new Error("Invalid input to extend: expected a plain object");const n=Ke(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t};return Le(this,"shape",r),r},checks:[]});return Ce(e,n)}function us(e,t){const n=Ke(e._zod.def,{get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Le(this,"shape",r),r},get catchall(){return t._zod.def.catchall},checks:[]});return Ce(e,n)}function ds(e,t,n){const r=Ke(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const i in n){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=e?new e({type:"optional",innerType:o[i]}):o[i])}else for(const i in o)s[i]=e?new e({type:"optional",innerType:o[i]}):o[i];return Le(this,"shape",s),s},checks:[]});return Ce(t,r)}function fs(e,t,n){const r=Ke(t._zod.def,{get shape(){const o=t._zod.def.shape,s={...o};if(n)for(const i in n){if(!(i in s))throw new Error(`Unrecognized key: "${i}"`);n[i]&&(s[i]=new e({type:"nonoptional",innerType:o[i]}))}else for(const i in o)s[i]=new e({type:"nonoptional",innerType:o[i]});return Le(this,"shape",s),s},checks:[]});return Ce(t,r)}function Qe(e,t=0){var n;for(let r=t;r<e.issues.length;r++)if(((n=e.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function jn(e,t){return t.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(e),n})}function it(e){return typeof e=="string"?e:e==null?void 0:e.message}function Me(e,t,n){var o,s,i,a,c,u;const r={...e,path:e.path??[]};if(!e.message){const h=it((i=(s=(o=e.inst)==null?void 0:o._zod.def)==null?void 0:s.error)==null?void 0:i.call(s,e))??it((a=t==null?void 0:t.error)==null?void 0:a.call(t,e))??it((c=n.customError)==null?void 0:c.call(n,e))??it((u=n.localeError)==null?void 0:u.call(n,e))??"Invalid input";r.message=h}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}function Rt(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function tt(...e){const[t,n,r]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:r}:{...t}}const On=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Et,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Fn=l("$ZodError",On),Hn=l("$ZodError",On,{Parent:Error});function hs(e,t=n=>n.message){const n={},r=[];for(const o of e.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):r.push(t(o));return{formErrors:r,fieldErrors:n}}function ms(e,t){const n=t||function(s){return s.message},r={_errors:[]},o=s=>{for(const i of s.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(a=>o({issues:a}));else if(i.code==="invalid_key")o({issues:i.issues});else if(i.code==="invalid_element")o({issues:i.issues});else if(i.path.length===0)r._errors.push(n(i));else{let a=r,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(i))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return o(e),r}const ps=e=>(t,n,r,o)=>{const s=r?Object.assign(r,{async:!1}):{async:!1},i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise)throw new et;if(i.issues.length){const a=new((o==null?void 0:o.Err)??e)(i.issues.map(c=>Me(c,s,Ae())));throw Ln(a,o==null?void 0:o.callee),a}return i.value},vs=e=>async(t,n,r,o)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},s);if(i instanceof Promise&&(i=await i),i.issues.length){const a=new((o==null?void 0:o.Err)??e)(i.issues.map(c=>Me(c,s,Ae())));throw Ln(a,o==null?void 0:o.callee),a}return i.value},Bn=e=>(t,n,r)=>{const o=r?{...r,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new et;return s.issues.length?{success:!1,error:new(e??Fn)(s.issues.map(i=>Me(i,o,Ae())))}:{success:!0,data:s.value}},gs=Bn(Hn),Un=e=>async(t,n,r)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},o);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new e(s.issues.map(i=>Me(i,o,Ae())))}:{success:!0,data:s.value}},_s=Un(Hn),bs=/^[cC][^\s-]{8,}$/,ws=/^[0-9a-z]+$/,ys=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ss=/^[0-9a-vA-V]{20}$/,ks=/^[A-Za-z0-9]{27}$/,xs=/^[a-zA-Z0-9_-]{21}$/,Ds=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,zs=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Xt=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Ps=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Es="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function $s(){return new RegExp(Es,"u")}const Zs=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ts=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Is=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ns=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,As=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Vn=/^[A-Za-z0-9_-]*$/,Ms=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,Rs=/^\+(?:[0-9]){6,14}[0-9]$/,Wn="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ls=new RegExp(`^${Wn}$`);function Kn(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Cs(e){return new RegExp(`^${Kn(e)}$`)}function js(e){const t=Kn({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${Wn}T(?:${r})$`)}const Os=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Fs=/^\d+$/,Hs=/^-?\d+(?:\.\d+)?/i,Bs=/true|false/i,Us=/^[^A-Z]*$/,Vs=/^[^a-z]*$/,ie=l("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),qn={number:"number",bigint:"bigint",object:"date"},Yn=l("$ZodCheckLessThan",(e,t)=>{ie.init(e,t);const n=qn[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Xn=l("$ZodCheckGreaterThan",(e,t)=>{ie.init(e,t);const n=qn[typeof t.value];e._zod.onattach.push(r=>{const o=r._zod.bag,s=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Ws=l("$ZodCheckMultipleOf",(e,t)=>{ie.init(e,t),e._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):ts(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Ks=l("$ZodCheckNumberFormat",(e,t)=>{var i;ie.init(e,t),t.format=t.format||"float64";const n=(i=t.format)==null?void 0:i.includes("int"),r=n?"int":"number",[o,s]=is[t.format];e._zod.onattach.push(a=>{const c=a._zod.bag;c.format=t.format,c.minimum=o,c.maximum=s,n&&(c.pattern=Fs)}),e._zod.check=a=>{const c=a.value;if(n){if(!Number.isInteger(c)){a.issues.push({expected:r,format:t.format,code:"invalid_type",continue:!1,input:c,inst:e});return}if(!Number.isSafeInteger(c)){c>0?a.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort});return}}c<o&&a.issues.push({origin:"number",input:c,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),c>s&&a.issues.push({origin:"number",input:c,code:"too_big",maximum:s,inst:e})}}),qs=l("$ZodCheckMaxLength",(e,t)=>{var n;ie.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!At(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(r._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{const o=r.value;if(o.length<=t.maximum)return;const i=Rt(o);r.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Ys=l("$ZodCheckMinLength",(e,t)=>{var n;ie.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!At(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(r._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{const o=r.value;if(o.length>=t.minimum)return;const i=Rt(o);r.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Xs=l("$ZodCheckLengthEquals",(e,t)=>{var n;ie.init(e,t),(n=e._zod.def).when??(n.when=r=>{const o=r.value;return!At(o)&&o.length!==void 0}),e._zod.onattach.push(r=>{const o=r._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=r=>{const o=r.value,s=o.length;if(s===t.length)return;const i=Rt(o),a=s>t.length;r.issues.push({origin:i,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),vt=l("$ZodCheckStringFormat",(e,t)=>{var n,r;ie.init(e,t),e._zod.onattach.push(o=>{const s=o._zod.bag;s.format=t.format,t.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),Gs=l("$ZodCheckRegex",(e,t)=>{vt.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Js=l("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Us),vt.init(e,t)}),Qs=l("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Vs),vt.init(e,t)}),ei=l("$ZodCheckIncludes",(e,t)=>{ie.init(e,t);const n=pt(t.includes),r=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(o=>{const s=o._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),ti=l("$ZodCheckStartsWith",(e,t)=>{ie.init(e,t);const n=new RegExp(`^${pt(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),ni=l("$ZodCheckEndsWith",(e,t)=>{ie.init(e,t);const n=new RegExp(`.*${pt(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),ri=l("$ZodCheckOverwrite",(e,t)=>{ie.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}});class oi{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(i=>i),o=Math.min(...r.map(i=>i.length-i.trimStart().length)),s=r.map(i=>i.slice(o)).map(i=>" ".repeat(this.indent*2)+i);for(const i of s)this.content.push(i)}compile(){const t=Function,n=this==null?void 0:this.args,o=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...n,o.join(`
`))}}const si={major:4,minor:0,patch:17},G=l("$ZodType",(e,t)=>{var o;var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=si;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const s of r)for(const i of s._zod.onattach)i(e);if(r.length===0)(n=e._zod).deferred??(n.deferred=[]),(o=e._zod.deferred)==null||o.push(()=>{e._zod.run=e._zod.parse});else{const s=(i,a,c)=>{let u=Qe(i),h;for(const p of a){if(p._zod.def.when){if(!p._zod.def.when(i))continue}else if(u)continue;const g=i.issues.length,v=p._zod.check(i);if(v instanceof Promise&&(c==null?void 0:c.async)===!1)throw new et;if(h||v instanceof Promise)h=(h??Promise.resolve()).then(async()=>{await v,i.issues.length!==g&&(u||(u=Qe(i,g)))});else{if(i.issues.length===g)continue;u||(u=Qe(i,g))}}return h?h.then(()=>i):i};e._zod.run=(i,a)=>{const c=e._zod.parse(i,a);if(c instanceof Promise){if(a.async===!1)throw new et;return c.then(u=>s(u,r,a))}return s(c,r,a)}}e["~standard"]={validate:s=>{var i;try{const a=gs(e,s);return a.success?{value:a.data}:{issues:(i=a.error)==null?void 0:i.issues}}catch{return _s(e,s).then(c=>{var u;return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}})}},vendor:"zod",version:1}}),Lt=l("$ZodString",(e,t)=>{var n;G.init(e,t),e._zod.pattern=[...((n=e==null?void 0:e._zod.bag)==null?void 0:n.patterns)??[]].pop()??Os(e._zod.bag),e._zod.parse=(r,o)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),W=l("$ZodStringFormat",(e,t)=>{vt.init(e,t),Lt.init(e,t)}),ii=l("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=zs),W.init(e,t)}),ai=l("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Xt(r))}else t.pattern??(t.pattern=Xt());W.init(e,t)}),ci=l("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Ps),W.init(e,t)}),li=l("$ZodURL",(e,t)=>{W.init(e,t),e._zod.check=n=>{try{const r=n.value.trim(),o=new URL(r);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Ms.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=o.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),ui=l("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=$s()),W.init(e,t)}),di=l("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=xs),W.init(e,t)}),fi=l("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=bs),W.init(e,t)}),hi=l("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=ws),W.init(e,t)}),mi=l("$ZodULID",(e,t)=>{t.pattern??(t.pattern=ys),W.init(e,t)}),pi=l("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Ss),W.init(e,t)}),vi=l("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ks),W.init(e,t)}),gi=l("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=js(t)),W.init(e,t)}),_i=l("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ls),W.init(e,t)}),bi=l("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Cs(t)),W.init(e,t)}),wi=l("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Ds),W.init(e,t)}),yi=l("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Zs),W.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv4"})}),Si=l("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ts),W.init(e,t),e._zod.onattach.push(n=>{const r=n._zod.bag;r.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),ki=l("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Is),W.init(e,t)}),xi=l("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Ns),W.init(e,t),e._zod.check=n=>{const[r,o]=n.value.split("/");try{if(!o)throw new Error;const s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Gn(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Di=l("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=As),W.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Gn(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function zi(e){if(!Vn.test(e))return!1;const t=e.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return Gn(n)}const Pi=l("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Vn),W.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{zi(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),Ei=l("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Rs),W.init(e,t)});function $i(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const o=JSON.parse(atob(r));return!("typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const Zi=l("$ZodJWT",(e,t)=>{W.init(e,t),e._zod.check=n=>{$i(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),Jn=l("$ZodNumber",(e,t)=>{G.init(e,t),e._zod.pattern=e._zod.bag.pattern??Hs,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const o=n.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return n;const s=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...s?{received:s}:{}}),n}}),Ti=l("$ZodNumber",(e,t)=>{Ks.init(e,t),Jn.init(e,t)}),Ii=l("$ZodBoolean",(e,t)=>{G.init(e,t),e._zod.pattern=Bs,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=!!n.value}catch{}const o=n.value;return typeof o=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),n}}),Ni=l("$ZodUnknown",(e,t)=>{G.init(e,t),e._zod.parse=n=>n}),Ai=l("$ZodNever",(e,t)=>{G.init(e,t),e._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:e}),n)});function Gt(e,t,n){e.issues.length&&t.issues.push(...jn(n,e.issues)),t.value[n]=e.value}const Mi=l("$ZodArray",(e,t)=>{G.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!Array.isArray(o))return n.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),n;n.value=Array(o.length);const s=[];for(let i=0;i<o.length;i++){const a=o[i],c=t.element._zod.run({value:a,issues:[]},r);c instanceof Promise?s.push(c.then(u=>Gt(u,n,i))):Gt(c,n,i)}return s.length?Promise.all(s).then(()=>n):n}});function at(e,t,n,r){e.issues.length&&t.issues.push(...jn(n,e.issues)),e.value===void 0?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const Ri=l("$ZodObject",(e,t)=>{G.init(e,t);const n=Rn(()=>{const p=Object.keys(t.shape);for(const v of p)if(!t.shape[v]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${v}": expected a Zod schema`);const g=ss(t.shape);return{shape:t.shape,keys:p,keySet:new Set(p),numKeys:p.length,optionalKeys:new Set(g)}});B(e._zod,"propValues",()=>{const p=t.shape,g={};for(const v in p){const d=p[v]._zod;if(d.values){g[v]??(g[v]=new Set);for(const x of d.values)g[v].add(x)}}return g});const r=p=>{const g=new oi(["shape","payload","ctx"]),v=n.value,d=m=>{const D=Yt(m);return`shape[${D}]._zod.run({ value: input[${D}], issues: [] }, ctx)`};g.write("const input = payload.value;");const x=Object.create(null);let k=0;for(const m of v.keys)x[m]=`key_${k++}`;g.write("const newResult = {}");for(const m of v.keys){const D=x[m],$=Yt(m);g.write(`const ${D} = ${d(m)};`),g.write(`
        if (${D}.issues.length) {
          payload.issues = payload.issues.concat(${D}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        if (${D}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${D}.value;
        }
      `)}g.write("payload.value = newResult;"),g.write("return payload;");const b=g.compile();return(m,D)=>b(p,m,D)};let o;const s=$t,i=!Mn.jitless,c=i&&rs.value,u=t.catchall;let h;e._zod.parse=(p,g)=>{h??(h=n.value);const v=p.value;if(!s(v))return p.issues.push({expected:"object",code:"invalid_type",input:v,inst:e}),p;const d=[];if(i&&c&&(g==null?void 0:g.async)===!1&&g.jitless!==!0)o||(o=r(t.shape)),p=o(p,g);else{p.value={};const D=h.shape;for(const $ of h.keys){const _=D[$]._zod.run({value:v[$],issues:[]},g);_ instanceof Promise?d.push(_.then(T=>at(T,p,$,v))):at(_,p,$,v)}}if(!u)return d.length?Promise.all(d).then(()=>p):p;const x=[],k=h.keySet,b=u._zod,m=b.def.type;for(const D of Object.keys(v)){if(k.has(D))continue;if(m==="never"){x.push(D);continue}const $=b.run({value:v[D],issues:[]},g);$ instanceof Promise?d.push($.then(Z=>at(Z,p,D,v))):at($,p,D,v)}return x.length&&p.issues.push({code:"unrecognized_keys",keys:x,input:v,inst:e}),d.length?Promise.all(d).then(()=>p):p}});function Jt(e,t,n,r){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;const o=e.filter(s=>!Qe(s));return o.length===1?(t.value=o[0].value,o[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(s=>s.issues.map(i=>Me(i,r,Ae())))}),t)}const Li=l("$ZodUnion",(e,t)=>{G.init(e,t),B(e._zod,"optin",()=>t.options.some(o=>o._zod.optin==="optional")?"optional":void 0),B(e._zod,"optout",()=>t.options.some(o=>o._zod.optout==="optional")?"optional":void 0),B(e._zod,"values",()=>{if(t.options.every(o=>o._zod.values))return new Set(t.options.flatMap(o=>Array.from(o._zod.values)))}),B(e._zod,"pattern",()=>{if(t.options.every(o=>o._zod.pattern)){const o=t.options.map(s=>s._zod.pattern);return new RegExp(`^(${o.map(s=>Mt(s.source)).join("|")})$`)}});const n=t.options.length===1,r=t.options[0]._zod.run;e._zod.parse=(o,s)=>{if(n)return r(o,s);let i=!1;const a=[];for(const c of t.options){const u=c._zod.run({value:o.value,issues:[]},s);if(u instanceof Promise)a.push(u),i=!0;else{if(u.issues.length===0)return u;a.push(u)}}return i?Promise.all(a).then(c=>Jt(c,o,e,s)):Jt(a,o,e,s)}}),Ci=l("$ZodIntersection",(e,t)=>{G.init(e,t),e._zod.parse=(n,r)=>{const o=n.value,s=t.left._zod.run({value:o,issues:[]},r),i=t.right._zod.run({value:o,issues:[]},r);return s instanceof Promise||i instanceof Promise?Promise.all([s,i]).then(([c,u])=>Qt(n,c,u)):Qt(n,s,i)}});function Zt(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(ut(e)&&ut(t)){const n=Object.keys(t),r=Object.keys(e).filter(s=>n.indexOf(s)!==-1),o={...e,...t};for(const s of r){const i=Zt(e[s],t[s]);if(!i.valid)return{valid:!1,mergeErrorPath:[s,...i.mergeErrorPath]};o[s]=i.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const o=e[r],s=t[r],i=Zt(o,s);if(!i.valid)return{valid:!1,mergeErrorPath:[r,...i.mergeErrorPath]};n.push(i.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Qt(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Qe(e))return e;const r=Zt(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const ji=l("$ZodEnum",(e,t)=>{G.init(e,t);const n=es(t.entries),r=new Set(n);e._zod.values=r,e._zod.pattern=new RegExp(`^(${n.filter(o=>os.has(typeof o)).map(o=>typeof o=="string"?pt(o):o.toString()).join("|")})$`),e._zod.parse=(o,s)=>{const i=o.value;return r.has(i)||o.issues.push({code:"invalid_value",values:n,input:i,inst:e}),o}}),Oi=l("$ZodTransform",(e,t)=>{G.init(e,t),e._zod.parse=(n,r)=>{const o=t.transform(n.value,n);if(r.async)return(o instanceof Promise?o:Promise.resolve(o)).then(i=>(n.value=i,n));if(o instanceof Promise)throw new et;return n.value=o,n}});function en(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Fi=l("$ZodOptional",(e,t)=>{G.init(e,t),e._zod.optin="optional",e._zod.optout="optional",B(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),B(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Mt(n.source)})?$`):void 0}),e._zod.parse=(n,r)=>{if(t.innerType._zod.optin==="optional"){const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>en(s,n.value)):en(o,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,r)}}),Hi=l("$ZodNullable",(e,t)=>{G.init(e,t),B(e._zod,"optin",()=>t.innerType._zod.optin),B(e._zod,"optout",()=>t.innerType._zod.optout),B(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${Mt(n.source)}|null)$`):void 0}),B(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,r)=>n.value===null?n:t.innerType._zod.run(n,r)}),Bi=l("$ZodDefault",(e,t)=>{G.init(e,t),e._zod.optin="optional",B(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{if(n.value===void 0)return n.value=t.defaultValue,n;const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>tn(s,t)):tn(o,t)}});function tn(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Ui=l("$ZodPrefault",(e,t)=>{G.init(e,t),e._zod.optin="optional",B(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>(n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,r))}),Vi=l("$ZodNonOptional",(e,t)=>{G.init(e,t),B(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>nn(s,e)):nn(o,e)}});function nn(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Wi=l("$ZodCatch",(e,t)=>{G.init(e,t),B(e._zod,"optin",()=>t.innerType._zod.optin),B(e._zod,"optout",()=>t.innerType._zod.optout),B(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(s=>(n.value=s.value,s.issues.length&&(n.value=t.catchValue({...n,error:{issues:s.issues.map(i=>Me(i,r,Ae()))},input:n.value}),n.issues=[]),n)):(n.value=o.value,o.issues.length&&(n.value=t.catchValue({...n,error:{issues:o.issues.map(s=>Me(s,r,Ae()))},input:n.value}),n.issues=[]),n)}}),Ki=l("$ZodPipe",(e,t)=>{G.init(e,t),B(e._zod,"values",()=>t.in._zod.values),B(e._zod,"optin",()=>t.in._zod.optin),B(e._zod,"optout",()=>t.out._zod.optout),B(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,r)=>{const o=t.in._zod.run(n,r);return o instanceof Promise?o.then(s=>rn(s,t,r)):rn(o,t,r)}});function rn(e,t,n){return e.issues.length?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const qi=l("$ZodReadonly",(e,t)=>{G.init(e,t),B(e._zod,"propValues",()=>t.innerType._zod.propValues),B(e._zod,"values",()=>t.innerType._zod.values),B(e._zod,"optin",()=>t.innerType._zod.optin),B(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,r)=>{const o=t.innerType._zod.run(n,r);return o instanceof Promise?o.then(on):on(o)}});function on(e){return e.value=Object.freeze(e.value),e}const Yi=l("$ZodCustom",(e,t)=>{ie.init(e,t),G.init(e,t),e._zod.parse=(n,r)=>n,e._zod.check=n=>{const r=n.value,o=t.fn(r);if(o instanceof Promise)return o.then(s=>sn(s,n,r,e));sn(o,n,r,e)}});function sn(e,t,n,r){if(!e){const o={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(o.params=r._zod.def.params),t.issues.push(tt(o))}}class Xi{constructor(){this._map=new Map,this._idmap=new Map}add(t,...n){const r=n[0];if(this._map.set(t,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const o={...r,...this._map.get(t)};return Object.keys(o).length?o:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function Gi(){return new Xi}const ct=Gi();function Ji(e,t){return new e({type:"string",...z(t)})}function Qi(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...z(t)})}function an(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...z(t)})}function ea(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...z(t)})}function ta(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...z(t)})}function na(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...z(t)})}function ra(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...z(t)})}function oa(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...z(t)})}function sa(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...z(t)})}function ia(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...z(t)})}function aa(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...z(t)})}function ca(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...z(t)})}function la(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...z(t)})}function ua(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...z(t)})}function da(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...z(t)})}function fa(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...z(t)})}function ha(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...z(t)})}function ma(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...z(t)})}function pa(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...z(t)})}function va(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...z(t)})}function ga(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...z(t)})}function _a(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...z(t)})}function ba(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...z(t)})}function wa(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...z(t)})}function ya(e,t){return new e({type:"string",format:"date",check:"string_format",...z(t)})}function Sa(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...z(t)})}function ka(e,t){return new e({type:"string",format:"duration",check:"string_format",...z(t)})}function xa(e,t){return new e({type:"number",checks:[],...z(t)})}function Da(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...z(t)})}function za(e,t){return new e({type:"boolean",...z(t)})}function Pa(e){return new e({type:"unknown"})}function Ea(e,t){return new e({type:"never",...z(t)})}function cn(e,t){return new Yn({check:"less_than",...z(t),value:e,inclusive:!1})}function kt(e,t){return new Yn({check:"less_than",...z(t),value:e,inclusive:!0})}function ln(e,t){return new Xn({check:"greater_than",...z(t),value:e,inclusive:!1})}function xt(e,t){return new Xn({check:"greater_than",...z(t),value:e,inclusive:!0})}function un(e,t){return new Ws({check:"multiple_of",...z(t),value:e})}function Qn(e,t){return new qs({check:"max_length",...z(t),maximum:e})}function dt(e,t){return new Ys({check:"min_length",...z(t),minimum:e})}function er(e,t){return new Xs({check:"length_equals",...z(t),length:e})}function $a(e,t){return new Gs({check:"string_format",format:"regex",...z(t),pattern:e})}function Za(e){return new Js({check:"string_format",format:"lowercase",...z(e)})}function Ta(e){return new Qs({check:"string_format",format:"uppercase",...z(e)})}function Ia(e,t){return new ei({check:"string_format",format:"includes",...z(t),includes:e})}function Na(e,t){return new ti({check:"string_format",format:"starts_with",...z(t),prefix:e})}function Aa(e,t){return new ni({check:"string_format",format:"ends_with",...z(t),suffix:e})}function nt(e){return new ri({check:"overwrite",tx:e})}function Ma(e){return nt(t=>t.normalize(e))}function Ra(){return nt(e=>e.trim())}function La(){return nt(e=>e.toLowerCase())}function Ca(){return nt(e=>e.toUpperCase())}function ja(e,t,n){return new e({type:"array",element:t,...z(n)})}function Oa(e,t,n){return new e({type:"custom",check:"custom",fn:t,...z(n)})}function Fa(e){const t=Ha(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(tt(r,n.value,t._zod.def));else{const o=r;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(tt(o))}},e(n.value,n)));return t}function Ha(e,t){const n=new ie({check:"custom",...z(t)});return n._zod.check=e,n}const Ba=l("ZodISODateTime",(e,t)=>{gi.init(e,t),Y.init(e,t)});function Ua(e){return wa(Ba,e)}const Va=l("ZodISODate",(e,t)=>{_i.init(e,t),Y.init(e,t)});function Wa(e){return ya(Va,e)}const Ka=l("ZodISOTime",(e,t)=>{bi.init(e,t),Y.init(e,t)});function qa(e){return Sa(Ka,e)}const Ya=l("ZodISODuration",(e,t)=>{wi.init(e,t),Y.init(e,t)});function Xa(e){return ka(Ya,e)}const Ga=(e,t)=>{Fn.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>ms(e,n)},flatten:{value:n=>hs(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Et,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Et,2)}},isEmpty:{get(){return e.issues.length===0}}})},gt=l("ZodError",Ga,{Parent:Error}),Ja=ps(gt),Qa=vs(gt),ec=Bn(gt),tc=Un(gt),J=l("ZodType",(e,t)=>(G.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]}),e.clone=(n,r)=>Ce(e,n,r),e.brand=()=>e,e.register=(n,r)=>(n.add(e,r),e),e.parse=(n,r)=>Ja(e,n,r,{callee:e.parse}),e.safeParse=(n,r)=>ec(e,n,r),e.parseAsync=async(n,r)=>Qa(e,n,r,{callee:e.parseAsync}),e.safeParseAsync=async(n,r)=>tc(e,n,r),e.spa=e.safeParseAsync,e.refine=(n,r)=>e.check(qc(n,r)),e.superRefine=n=>e.check(Yc(n)),e.overwrite=n=>e.check(nt(n)),e.optional=()=>mn(e),e.nullable=()=>pn(e),e.nullish=()=>mn(pn(e)),e.nonoptional=n=>Fc(e,n),e.array=()=>Pc(e),e.or=n=>Zc([e,n]),e.and=n=>Ic(e,n),e.transform=n=>vn(e,Mc(n)),e.default=n=>Cc(e,n),e.prefault=n=>Oc(e,n),e.catch=n=>Bc(e,n),e.pipe=n=>vn(e,n),e.readonly=()=>Wc(e),e.describe=n=>{const r=e.clone();return ct.add(r,{description:n}),r},Object.defineProperty(e,"description",{get(){var n;return(n=ct.get(e))==null?void 0:n.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return ct.get(e);const r=e.clone();return ct.add(r,n[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),tr=l("_ZodString",(e,t)=>{Lt.init(e,t),J.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...r)=>e.check($a(...r)),e.includes=(...r)=>e.check(Ia(...r)),e.startsWith=(...r)=>e.check(Na(...r)),e.endsWith=(...r)=>e.check(Aa(...r)),e.min=(...r)=>e.check(dt(...r)),e.max=(...r)=>e.check(Qn(...r)),e.length=(...r)=>e.check(er(...r)),e.nonempty=(...r)=>e.check(dt(1,...r)),e.lowercase=r=>e.check(Za(r)),e.uppercase=r=>e.check(Ta(r)),e.trim=()=>e.check(Ra()),e.normalize=(...r)=>e.check(Ma(...r)),e.toLowerCase=()=>e.check(La()),e.toUpperCase=()=>e.check(Ca())}),nc=l("ZodString",(e,t)=>{Lt.init(e,t),tr.init(e,t),e.email=n=>e.check(Qi(rc,n)),e.url=n=>e.check(oa(oc,n)),e.jwt=n=>e.check(ba(bc,n)),e.emoji=n=>e.check(sa(sc,n)),e.guid=n=>e.check(an(dn,n)),e.uuid=n=>e.check(ea(lt,n)),e.uuidv4=n=>e.check(ta(lt,n)),e.uuidv6=n=>e.check(na(lt,n)),e.uuidv7=n=>e.check(ra(lt,n)),e.nanoid=n=>e.check(ia(ic,n)),e.guid=n=>e.check(an(dn,n)),e.cuid=n=>e.check(aa(ac,n)),e.cuid2=n=>e.check(ca(cc,n)),e.ulid=n=>e.check(la(lc,n)),e.base64=n=>e.check(va(vc,n)),e.base64url=n=>e.check(ga(gc,n)),e.xid=n=>e.check(ua(uc,n)),e.ksuid=n=>e.check(da(dc,n)),e.ipv4=n=>e.check(fa(fc,n)),e.ipv6=n=>e.check(ha(hc,n)),e.cidrv4=n=>e.check(ma(mc,n)),e.cidrv6=n=>e.check(pa(pc,n)),e.e164=n=>e.check(_a(_c,n)),e.datetime=n=>e.check(Ua(n)),e.date=n=>e.check(Wa(n)),e.time=n=>e.check(qa(n)),e.duration=n=>e.check(Xa(n))});function Je(e){return Ji(nc,e)}const Y=l("ZodStringFormat",(e,t)=>{W.init(e,t),tr.init(e,t)}),rc=l("ZodEmail",(e,t)=>{ci.init(e,t),Y.init(e,t)}),dn=l("ZodGUID",(e,t)=>{ii.init(e,t),Y.init(e,t)}),lt=l("ZodUUID",(e,t)=>{ai.init(e,t),Y.init(e,t)}),oc=l("ZodURL",(e,t)=>{li.init(e,t),Y.init(e,t)}),sc=l("ZodEmoji",(e,t)=>{ui.init(e,t),Y.init(e,t)}),ic=l("ZodNanoID",(e,t)=>{di.init(e,t),Y.init(e,t)}),ac=l("ZodCUID",(e,t)=>{fi.init(e,t),Y.init(e,t)}),cc=l("ZodCUID2",(e,t)=>{hi.init(e,t),Y.init(e,t)}),lc=l("ZodULID",(e,t)=>{mi.init(e,t),Y.init(e,t)}),uc=l("ZodXID",(e,t)=>{pi.init(e,t),Y.init(e,t)}),dc=l("ZodKSUID",(e,t)=>{vi.init(e,t),Y.init(e,t)}),fc=l("ZodIPv4",(e,t)=>{yi.init(e,t),Y.init(e,t)}),hc=l("ZodIPv6",(e,t)=>{Si.init(e,t),Y.init(e,t)}),mc=l("ZodCIDRv4",(e,t)=>{ki.init(e,t),Y.init(e,t)}),pc=l("ZodCIDRv6",(e,t)=>{xi.init(e,t),Y.init(e,t)}),vc=l("ZodBase64",(e,t)=>{Di.init(e,t),Y.init(e,t)}),gc=l("ZodBase64URL",(e,t)=>{Pi.init(e,t),Y.init(e,t)}),_c=l("ZodE164",(e,t)=>{Ei.init(e,t),Y.init(e,t)}),bc=l("ZodJWT",(e,t)=>{Zi.init(e,t),Y.init(e,t)}),nr=l("ZodNumber",(e,t)=>{Jn.init(e,t),J.init(e,t),e.gt=(r,o)=>e.check(ln(r,o)),e.gte=(r,o)=>e.check(xt(r,o)),e.min=(r,o)=>e.check(xt(r,o)),e.lt=(r,o)=>e.check(cn(r,o)),e.lte=(r,o)=>e.check(kt(r,o)),e.max=(r,o)=>e.check(kt(r,o)),e.int=r=>e.check(fn(r)),e.safe=r=>e.check(fn(r)),e.positive=r=>e.check(ln(0,r)),e.nonnegative=r=>e.check(xt(0,r)),e.negative=r=>e.check(cn(0,r)),e.nonpositive=r=>e.check(kt(0,r)),e.multipleOf=(r,o)=>e.check(un(r,o)),e.step=(r,o)=>e.check(un(r,o)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function N(e){return xa(nr,e)}const wc=l("ZodNumberFormat",(e,t)=>{Ti.init(e,t),nr.init(e,t)});function fn(e){return Da(wc,e)}const yc=l("ZodBoolean",(e,t)=>{Ii.init(e,t),J.init(e,t)});function Sc(e){return za(yc,e)}const kc=l("ZodUnknown",(e,t)=>{Ni.init(e,t),J.init(e,t)});function hn(){return Pa(kc)}const xc=l("ZodNever",(e,t)=>{Ai.init(e,t),J.init(e,t)});function Dc(e){return Ea(xc,e)}const zc=l("ZodArray",(e,t)=>{Mi.init(e,t),J.init(e,t),e.element=t.element,e.min=(n,r)=>e.check(dt(n,r)),e.nonempty=n=>e.check(dt(1,n)),e.max=(n,r)=>e.check(Qn(n,r)),e.length=(n,r)=>e.check(er(n,r)),e.unwrap=()=>e.element});function Pc(e,t){return ja(zc,e,t)}const Ec=l("ZodObject",(e,t)=>{Ri.init(e,t),J.init(e,t),B(e,"shape",()=>t.shape),e.keyof=()=>Nc(Object.keys(e._zod.def.shape)),e.catchall=n=>e.clone({...e._zod.def,catchall:n}),e.passthrough=()=>e.clone({...e._zod.def,catchall:hn()}),e.loose=()=>e.clone({...e._zod.def,catchall:hn()}),e.strict=()=>e.clone({...e._zod.def,catchall:Dc()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=n=>ls(e,n),e.merge=n=>us(e,n),e.pick=n=>as(e,n),e.omit=n=>cs(e,n),e.partial=(...n)=>ds(rr,e,n[0]),e.required=(...n)=>fs(or,e,n[0])});function de(e,t){const n={type:"object",get shape(){return Le(this,"shape",e?ns(e):{}),this.shape},...z(t)};return new Ec(n)}const $c=l("ZodUnion",(e,t)=>{Li.init(e,t),J.init(e,t),e.options=t.options});function Zc(e,t){return new $c({type:"union",options:e,...z(t)})}const Tc=l("ZodIntersection",(e,t)=>{Ci.init(e,t),J.init(e,t)});function Ic(e,t){return new Tc({type:"intersection",left:e,right:t})}const Tt=l("ZodEnum",(e,t)=>{ji.init(e,t),J.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(r,o)=>{const s={};for(const i of r)if(n.has(i))s[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new Tt({...t,checks:[],...z(o),entries:s})},e.exclude=(r,o)=>{const s={...t.entries};for(const i of r)if(n.has(i))delete s[i];else throw new Error(`Key ${i} not found in enum`);return new Tt({...t,checks:[],...z(o),entries:s})}});function Nc(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new Tt({type:"enum",entries:n,...z(t)})}const Ac=l("ZodTransform",(e,t)=>{Oi.init(e,t),J.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=s=>{if(typeof s=="string")n.issues.push(tt(s,n.value,t));else{const i=s;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),n.issues.push(tt(i))}};const o=t.transform(n.value,n);return o instanceof Promise?o.then(s=>(n.value=s,n)):(n.value=o,n)}});function Mc(e){return new Ac({type:"transform",transform:e})}const rr=l("ZodOptional",(e,t)=>{Fi.init(e,t),J.init(e,t),e.unwrap=()=>e._zod.def.innerType});function mn(e){return new rr({type:"optional",innerType:e})}const Rc=l("ZodNullable",(e,t)=>{Hi.init(e,t),J.init(e,t),e.unwrap=()=>e._zod.def.innerType});function pn(e){return new Rc({type:"nullable",innerType:e})}const Lc=l("ZodDefault",(e,t)=>{Bi.init(e,t),J.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Cc(e,t){return new Lc({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Cn(t)}})}const jc=l("ZodPrefault",(e,t)=>{Ui.init(e,t),J.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Oc(e,t){return new jc({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Cn(t)}})}const or=l("ZodNonOptional",(e,t)=>{Vi.init(e,t),J.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Fc(e,t){return new or({type:"nonoptional",innerType:e,...z(t)})}const Hc=l("ZodCatch",(e,t)=>{Wi.init(e,t),J.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Bc(e,t){return new Hc({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Uc=l("ZodPipe",(e,t)=>{Ki.init(e,t),J.init(e,t),e.in=t.in,e.out=t.out});function vn(e,t){return new Uc({type:"pipe",in:e,out:t})}const Vc=l("ZodReadonly",(e,t)=>{qi.init(e,t),J.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Wc(e){return new Vc({type:"readonly",innerType:e})}const Kc=l("ZodCustom",(e,t)=>{Yi.init(e,t),J.init(e,t)});function qc(e,t={}){return Oa(Kc,e,t)}function Yc(e){return Fa(e)}const Xc=de({meanIntervalSec:N().positive(),minDeltaSec:N().nonnegative(),maxDeltaSec:N().positive()}).refine(e=>e.maxDeltaSec>=e.minDeltaSec),Gc=de({spawning:de({basicShooter:Xc}),movement:de({ownSpeedX_px_per_s:N().positive(),jitterPercent:N().min(0).max(.5),reverseSpawnSpeedScale:N().min(0).max(2),reverseAdvanceScale_outOfRange:N().min(0).max(2),attackRangeFrac_ofCombatWidth:N().min(.1).max(.9),arrivalEpsilon_px:N().min(.5).max(10)}),projectiles:de({enemy:de({speed_px_per_s:N().positive(),lifetimeSec:N().positive(),fireIntervalMinSec:N().positive(),fireIntervalMaxSec:N().positive()}).refine(e=>e.fireIntervalMaxSec>=e.fireIntervalMinSec),player:de({chainHitsMax:N().int().min(0).max(8)})}),caps:de({enemies:N().int().min(1).max(512),projectiles:N().int().min(1).max(2048),damageNumbers:N().int().min(1).max(2048)}),scaling:de({hpAcrossLandsMul:N().min(1.01).max(3),dmgAcrossLandsMul:N().min(1.01).max(3),withinLandEndRatio:N().min(.3).max(.99),withinLandStepMeters:N().int().min(1).max(50),baseHP_atLand1_formula:Je().optional(),baseDmg_atLand1_formula:Je().optional()}),bossLand10:de({hpMultVsEndOfLand:N().min(1).max(10),dmgMultVsEndOfLand:N().min(1).max(10),burstShots:N().int().min(1).max(5),burstGapMs:N().int().min(50).max(1e3),fireIntervalMinSec:N().positive(),fireIntervalMaxSec:N().positive()}),ui:de({enemyHpBar:de({visibleOnlyWhenDamaged:Sc(),color:Je(),thicknessPx:N().positive(),widthPctOfEnemy:N().min(10).max(200),hideDelayAtFullSec:N().nonnegative()}),damageNumbers:de({popScale:N().positive(),floatUpPx:N(),fadeDurationSec:N().positive(),offsetJitterX:N().nonnegative(),offsetJitterY:N().nonnegative(),playerHitColor:Je(),enemyHitColor:Je(),maxDotHz:N().positive()})}).optional()});async function Jc(){const e=await fetch("/enemy-config.json");if(!e.ok)throw Fe(!1),new Error("enemy-config.json not found");const t=await e.json(),n=Gc.safeParse(t);if(!n.success)throw Fe(!1),console.error("Enemy config invalid:",n.error),new Error("enemy-config.json invalid");return Fe(!0),n.data}var Qc=ee('<div class="loading svelte-1b91on3">Loading Dragon Chronicles...</div>'),el=ee('<div class="page svelte-1b91on3"><!> <!> <!> <!></div> <!>',1);function al(e,t){Pe(t,!1);const[n,r]=We(),o=()=>De(Te,"$gameState110",n),s=X();let i=X("enchant");function a(m){H(i,m)}It(()=>{Vr(),Jc().catch(m=>console.error("Failed to load enemy config:",m))}),Q(()=>o(),()=>{H(s,o())}),Ve(),ze();var c=el(),u=He(c),h=y(u);No(h,{});var p=S(h,2);Ro(p,{});var g=S(p,2);Fo(g,{get activeTab(){return f(i)},setActiveTab:a});var v=S(g,2);{var d=m=>{Xo(m,{})},x=m=>{var D=Nt(),$=He(D);{var Z=_=>{Qo(_,{})};xe($,_=>{f(i)==="settings"&&_(Z)},!0)}q(m,D)};xe(v,m=>{f(i)==="enchant"?m(d):m(x,!1)})}w(u);var k=S(u,2);{var b=m=>{var D=Qc();q(m,D)};xe(k,m=>{f(s)||m(b)})}q(e,c),Ee(),r()}export{al as component};
